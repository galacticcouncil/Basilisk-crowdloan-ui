(this["webpackJsonpBasilisk-crowdloan-ui"]=this["webpackJsonpBasilisk-crowdloan-ui"]||[]).push([[0],{288:function(e,t,n){},289:function(e,t,n){},299:function(e,t){},300:function(e,t){},301:function(e,t){},302:function(e,t){},307:function(e,t){},308:function(e,t){},326:function(e,t){},331:function(e,t){},332:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){},445:function(e,t,n){"use strict";n.r(t);var a,c,i=n(13),o=n.n(i),s=n(204),r=n.n(s),d=(n(288),n(289),n(497)),l=n(500),u=n(484),b=n(24),j=n.n(b),h=function(e){return new j.a(e).multipliedBy(new j.a(10).exponentiatedBy(12)).toFixed(12)},g=function(e){return new j.a(e).dividedBy(new j.a(10).exponentiatedBy(12)).toFixed(12)},v=function(e){return new j.a(e).multipliedBy(p.ksmToUsd).toFixed(12)},O=function(e){return new j.a(e).dividedBy(p.hdxToUsd).toFixed(12)},f=new j.a("10").pow("6"),x=new j.a("10").pow("12"),p={processorUrl:"https://api-crowdloan-basilisk.hydradx.io/graphql",nodeUrl:"wss://ksm-arch-01.hydration.cloud",ownParachainId:"2090",ownCrowdloanBlockHeight:"8979298",dappName:"Basilisk Crowdloan",chronicleRefetchTimeout:6e3,auctionEndingPeriodLength:72e3,crowdloanCap:new j.a(h(new j.a("222222"))),opportunityCost:new j.a("0.1375"),ksmToUsd:"400",hdxToUsd:"0.08059",ksmPrecision:12,displayPrecision:6,chart:{historicalDataSpan:600,blocksPerDay:14400,auctionClosingStart:9035066},incentives:{hdx:{leadPercentageRateCliffRange:[new j.a("15").multipliedBy(f).toNumber(),new j.a("20").multipliedBy(f).toNumber()],scale:{max:30,min:5,none:0}},bsx:{allocated:new j.a(h(new j.a("15000000000"))),scale:{max:1,min:0,none:0}}}},m=n(12),w=new d.a({uri:p.processorUrl,cache:new l.a,defaultOptions:{watchQuery:{fetchPolicy:"network-only"},query:{fetchPolicy:"network-only"}}}),P=function(e){var t=e.children;return Object(m.jsx)(u.a,{client:w,children:t})},A=n(2),S=n(22),y=n(66);!function(e){e.LoadInitialData="LOAD_INITIAL_DATA",e.SetInitialData="SET_INITIAL_DATA_SUCCESS",e.LoadChronicleData="LOAD_CHRONICLE_DATA",e.SetChronicleData="SET_CHRONICLE_DATA",e.LoadAccountData="LOAD_ACCOUNT_DATA",e.SetAccountData="SET_ACCOUNT_DATA",e.LoadIncentiveData="LOAD_INCENTIVE_DATA",e.SetIncentiveData="SET_INCENTIVE_DATA",e.LoadHistoricalSiblingFundsPledgedData="LOAD_HISTORICAL_SIBLING_FUNDS_PLEDGED_DATA",e.SetHistoricalSiblingFundsPledgedData="SET_HISTORICAL_SIBLING_FUNDS_PLEDGED_DATA",e.LoadLatestOwnFundsPledgedData="LOAD_LATEST_OWN_FUNDS_PLEDGED_DATA",e.SetLatestOwnFundsPledgedData="SET_LATEST_OWN_FUNDS_PLEDGED_DATA",e.LoadLatestSiblingFundsPledgedData="LOAD_LATEST_SIBLING_FUNDS_PLEDGED_DATA",e.SetLatestSiblingFundsPledgedData="SET_LATEST_SIBLING_FUNDS_PLEDGED_DATA"}(a||(a={})),function(e){e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded"}(c||(c={}));var I=function(e){return{loading:c.Initial,data:e}},C=function(e){return{loading:c.Loading,data:e}},N=function(e){return{loading:c.Loaded,data:e}},k={initial:I({initializedAtBlockHeight:void 0}),chronicle:I({lastProcessedBlock:"0",mostRecentAuctionStart:void 0,mostRecentAuctionClosingStart:void 0}),incentives:I({leadPercentageRate:"0",totalContributionWeight:"0",siblingParachain:{id:void 0}}),account:I({totalContributed:"0",contributions:[],historicalIncentives:[]}),own:{historicalFundsPledged:I([]),parachain:I({fundsPledged:"0",hasWonAnAuction:!1})},sibling:{historicalFundsPledged:I([]),parachain:I({fundsPledged:"0",hasWonAnAuction:!1})}},D=function(e,t){switch(t.type){case a.LoadInitialData:return Object(S.a)(Object(S.a)({},e),{},{initial:C(e.initial.data)});case a.SetInitialData:return Object(S.a)(Object(S.a)({},e),{},{initial:N({initializedAtBlockHeight:t.payload.chronicle.lastProcessedBlock}),chronicle:N(t.payload.chronicle),incentives:N(t.payload.incentives),own:{historicalFundsPledged:N(t.payload.ownHistoricalFundsPledged),parachain:N(t.payload.ownParachain)}});case a.LoadAccountData:return Object(S.a)(Object(S.a)({},e),{},{account:C(e.account.data)});case a.SetAccountData:return Object(S.a)(Object(S.a)({},e),{},{account:N(t.payload)});case a.LoadChronicleData:return Object(S.a)(Object(S.a)({},e),{},{chronicle:C(e.chronicle.data)});case a.SetChronicleData:return Object(S.a)(Object(S.a)({},e),{},{chronicle:N(t.payload)});case a.LoadIncentiveData:return Object(S.a)(Object(S.a)({},e),{},{incentives:C(e.incentives.data)});case a.SetIncentiveData:return Object(S.a)(Object(S.a)({},e),{},{incentives:N(t.payload)});case a.LoadHistoricalSiblingFundsPledgedData:return Object(S.a)(Object(S.a)({},e),{},{sibling:Object(S.a)(Object(S.a)({},e.sibling),{},{historicalFundsPledged:C(e.sibling.historicalFundsPledged.data)})});case a.SetHistoricalSiblingFundsPledgedData:return Object(S.a)(Object(S.a)({},e),{},{sibling:Object(S.a)(Object(S.a)({},e.sibling),{},{historicalFundsPledged:N(t.payload)})});case a.LoadLatestSiblingFundsPledgedData:return Object(S.a)(Object(S.a)({},e),{},{sibling:Object(S.a)(Object(S.a)({},e.sibling),{},{parachain:C(e.sibling.parachain.data)})});case a.SetLatestSiblingFundsPledgedData:return Object(S.a)(Object(S.a)({},e),{},{sibling:Object(S.a)(Object(S.a)({},e.sibling),{},{parachain:N(t.payload)})});case a.LoadLatestOwnFundsPledgedData:return Object(S.a)(Object(S.a)({},e),{},{own:Object(S.a)(Object(S.a)({},e.own),{},{parachain:C(e.own.parachain.data)})});case a.SetLatestOwnFundsPledgedData:return Object(S.a)(Object(S.a)({},e),{},{own:Object(S.a)(Object(S.a)({},e.own),{},{parachain:N(t.payload)})});default:return e}},B=Object(y.a)((function(){var e=Object(i.useReducer)(D,k),t=Object(A.a)(e,2);return{state:t[0],dispatch:t[1]}})),L=Object(A.a)(B,2),F=L[0],R=L[1],E=function(){return R().dispatch},H=function(){return R().state},_=function(){return H().initial.loading===c.Loaded},T=function(){return H().initial.data.initializedAtBlockHeight},U=function(){return H().chronicle},q=function(){return U().data.lastProcessedBlock},W=function(){return H().incentives},G=function(){return H().account},$=function(){var e;return(null===(e=H().own.parachain.data)||void 0===e?void 0:e.hasWonAnAuction)||!1},M=function(){return H().own},V=function(){return H().sibling},z=n(18),J=n.n(z),Z=n(23),K=n(499),Q=n(496),X=n(138),Y=n(485),ee=n(33),te=n.n(ee),ne=n(503),ae=n(237),ce={address:function(){var e=new URL(document.location).searchParams;return te.a.debug("account",e.get("account")),e.get("account")}()||""},ie=Object(y.a)((function(){var e=Object(i.useState)([]),t=Object(A.a)(e,2),n=t[0],a=t[1],c=Object(Y.a)("bsx-crowdloan-account",ce.address),o=Object(A.a)(c,2),s=o[0],r=o[1];s=s?Object(ne.a)(Object(ae.a)(s),2):"";var d=Object(i.useState)("0"),l=Object(A.a)(d,2),u=l[0],b=l[1],h=Object(i.useState)(!1),g=Object(A.a)(h,2),v=g[0],O=g[1],f=Object(i.useState)(!1),x=Object(A.a)(f,2),m=(x[0],x[1]),w=Object(i.useState)(void 0),P=Object(A.a)(w,2),y=P[0],I=P[1],C=Object(i.useState)(void 0),N=Object(A.a)(C,2),k=N[0],D=N[1],B=U();Object(i.useEffect)((function(){setTimeout(Object(Z.a)(J.a.mark((function e(){var t,n,c,i;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te.a.debug("usePolkadot","loading initial"),m(!0),e.next=4,Object(X.b)(p.dappName);case 4:return t=e.sent,e.next=7,Object(X.a)();case 7:return n=e.sent.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{address:Object(ne.a)(Object(ae.a)(e.address),2)})})),c=new K.a(p.nodeUrl),e.next=11,Q.a.create({provider:c});case 11:i=e.sent,te.a.debug("usePolkadot","loaded",t,i,n),a(n),I(i),m(!1);case 16:case"end":return e.stop()}}),e)}))),300)}),[]);var L=function(){var e=Object(Z.a)(J.a.mark((function e(){var t,n;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y&&s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,y.query.system.account(s);case 4:t=e.sent,n=t.data,te.a.debug("usePolkadot","balance",n.free.toString()),b(n.free.toString());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){s&&y&&L()}),[s,y,B.data.lastProcessedBlock]),{accounts:n,setActiveAccount:r,activeAccount:s,activeAccountBalance:u,lastContributionStatus:k,showAccountSelector:v,setShowAccountSelector:O,contribute:function(){var e=Object(Z.a)(J.a.mark((function e(t){var n,a;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return");case 2:if(s){e.next=4;break}return e.abrupt("return");case 4:return m(!0),e.next=7,Object(X.c)(s);case 7:n=e.sent,a=n.signer,Object(Z.a)(J.a.mark((function e(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{y.tx.crowdloan.contribute(p.ownParachainId,new j.a(t).toFixed(0),null).signAndSend(s,{signer:a},(function(e){var t=e.status,n=e.events;(t.isInBlock||t.isFinalized)&&(n.filter((function(e){var t=e.event;return y.events.system.ExtrinsicFailed.is(t)})).length?D(!1):D(!0))})),L()}catch(n){console.error(n),D(!1)}m(!1);case 2:case"end":return e.stop()}}),e)})))();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})),oe=Object(A.a)(ie,2),se=oe[0],re=oe[1],de=(n(332),n.p+"static/media/Logo-dark-2-clean.cbd38319.png"),le=n.p+"static/media/basilisk-wallpaper-2.cc01249c.png",ue=n(96),be=n.n(ue),je=(n(333),n(124)),he=n.n(je),ge=n(233),ve=function(e,t){return p.incentives.bsx.scale.max},Oe=function(e,t){return e.reduce((function(e,t){var n=ve(t.blockHeight);return e=e.plus(new j.a(t.balance).multipliedBy(n))}),new j.a(0))},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Oe(e),n=p.incentives.bsx.allocated.dividedBy(p.crowdloanCap.multipliedBy(p.incentives.bsx.scale.max)).multipliedBy(t);return n},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2?arguments[2]:void 0,n=Oe(e),a=new j.a(t);if(a.isZero())return new j.a(0);var c=p.incentives.bsx.allocated.dividedBy(a).multipliedBy(n);return c},pe=function(e,t){return e.reduce((function(e,n){var a=Object(ge.find)(t,{blockHeight:"".concat(n.blockHeight)}),c=(null===a||void 0===a||a.leadPercentageRate,parseInt(n.blockHeight)>9233727?5:30),i=new j.a(n.balance).multipliedBy(new j.a(p.opportunityCost)).multipliedBy(new j.a(c)).dividedBy(new j.a(100));return e=e.plus(i)}),new j.a("0"))},me=function(){var e=W();q(),U().data.mostRecentAuctionClosingStart;if(e.loading!==c.Loaded)return{bsxMultiplier:void 0,hdxBonus:void 0};var t=new j.a(function(e){var t=new j.a(e),n=p.incentives.hdx.leadPercentageRateCliffRange[0],a=p.incentives.hdx.leadPercentageRateCliffRange[1];return t.lt(n)?p.incentives.hdx.scale.max:t.gt(a)?p.incentives.hdx.scale.min:he()([n,a],[p.incentives.hdx.scale.max,p.incentives.hdx.scale.min])(e)}(e.data.leadPercentageRate));return{bsxMultiplier:new j.a(ve()),hdxBonus:t}},we=function(e){var t=e.connectAccount,n=re(),a=n.activeAccountBalance,c=n.lastContributionStatus,o=n.contribute,s=n.activeAccount,r=Object(i.useState)(void 0),d=Object(A.a)(r,2),l=d[0],u=d[1],b={minimalBsxReceived:"0",currentBsxReceived:"0",currentHdxReceived:"0"},w=Object(i.useState)(b),P=Object(A.a)(w,2),S=P[0],y=P[1],I=U().data,C=I.lastProcessedBlock,N=I.mostRecentAuctionClosingStart,k=W().data,D=k.totalContributionWeight,B=k.leadPercentageRate,L=function(){var e;return(null===(e=H().own.parachain.data)||void 0===e?void 0:e.fundsPledged)||"222000000000000"}(),F=$();Object(i.useEffect)((function(){var e=[{blockHeight:C,balance:new j.a(l||0).multipliedBy(x).toFixed(0),crowdloan:{id:p.ownParachainId}}];if(!l)return y(b);var t=fe(e,N),n=new j.a(e[0].balance).multipliedBy(ve()).multipliedBy(f),a=new j.a(D).plus(n).toFixed(0),c=xe(e,N,a),i=O(v(pe(e,[{blockHeight:C,leadPercentageRate:B}])));y({minimalBsxReceived:new j.a(g(t)).toFixed(p.displayPrecision),currentBsxReceived:new j.a(g(c)).toFixed(p.displayPrecision),currentHdxReceived:new j.a(g(i)).toFixed(p.displayPrecision)})}),[C,B,N,D,l]);Object(i.useEffect)((function(){c&&u(0)}),[c]);var R=function(){};return Object(m.jsxs)("div",{className:"bsx-contribute-form",children:[Object(m.jsxs)("div",{className:"bsx-form-wrapper",children:[Object(m.jsx)("label",{children:"ksm contribution"}),Object(m.jsx)(be.a,{name:"amount",decimalsLimit:12,value:l,disabled:F,allowNegativeValue:!1,placeholder:F?"Sacrifice not required":"Sacrifice goes here",intlConfig:{locale:"en-US"},onValueChange:function(e){if(te.a.debug("CrowdloanContributeForm","handleContributeChange",e,a),void 0==e)return u(void 0);p.crowdloanCap.minus(L).lt(h(e))||u(e)}}),Object(m.jsx)("label",{children:"minimal bsx received"}),Object(m.jsx)(be.a,{name:"minimal bsx received",disabled:!0,value:S.minimalBsxReceived,onValueChange:R}),Object(m.jsx)("label",{children:"current bsx received"}),Object(m.jsx)(be.a,{name:"current bsx received",disabled:!0,value:S.currentBsxReceived,onValueChange:R}),Object(m.jsx)("label",{children:"current hdx received"}),Object(m.jsx)(be.a,{name:"current hdx received",disabled:!0,value:S.currentHdxReceived,onValueChange:R}),F?Object(m.jsx)("button",{disabled:!0,children:"Slot Ssss...ssecured"}):s?Object(m.jsx)("button",{disabled:!l||0==l,onClick:function(){te.a.debug("CrowdloanContributeForm","handleContributeClick",l),o(h(l))},children:"Contribute"}):Object(m.jsx)("button",{onClick:t,children:"Connect Account"})]}),Object(m.jsx)("div",{className:"contribution-status",children:c?"Thanksss for your sacrifice":0==c?"There was a problem with your contribution, please try again.":""})]})},Pe=n(30),Ae=n(125),Se=n(495),ye=(n(334),function(e){var t=e.onAccountSelect,n=re(),a=n.accounts,c=n.setActiveAccount,o=Object(i.useRef)(null);Object(Se.a)(o,(function(){t()}));return Object(m.jsx)("div",{className:"bsx-account-selector",children:Object(m.jsx)("div",{className:"bsx-account-selector-backdrop",children:Object(m.jsxs)("div",{className:"bsx-account-selector-modal",ref:o,children:[Object(m.jsx)("div",{className:"title",children:"Select an account"}),a&&a.length?a.map((function(e){return Object(m.jsxs)("div",{className:"account",onClick:function(n){return a=e.address,c(a),void t();var a},children:[Object(m.jsx)("p",{className:"name",children:e.meta.name}),Object(m.jsx)("p",{className:"address",children:e.address})]},e.address)})):Object(m.jsx)("div",{className:"bsx-loading-accounts",children:"Loading accounts"}),Object(m.jsx)("div",{})]})})})}),Ie=n(84),Ce=n.n(Ie),Ne=n(127),ke=n(502);Pe.b.register(Ae.a);var De={precision:6,decimalSeparator:"."};Ne.b.animation=!1;var Be="#90ff33",Le="#171b22",Fe=function(){var e=V(),t=function(){var t=e.historicalFundsPledged,n=e.parachain.data.fundsPledged;return{siblingHistoricalFundsPledged:t.data,siblingFundsPledged:n}}(),n=t.siblingHistoricalFundsPledged,a=t.siblingFundsPledged,c=M(),o=function(){var e=c.historicalFundsPledged,t=c.parachain.data.fundsPledged;return{ownHistoricalFundsPledged:e.data,ownFundsPledged:t}}(),s=o.ownHistoricalFundsPledged,r=o.ownFundsPledged,d=U().data,l=d.lastProcessedBlock,u=d.mostRecentAuctionClosingStart,b=(d.mostRecentAuctionStart,Object(i.useState)(void 0)),j=Object(A.a)(b,2),h=j[0],v=j[1],O=Object(ke.a)((function(e){return 38===e.keyCode}));Object(A.a)(O,1)[0]&&!h&&v(!0);var f=function(e){return null===e||void 0===e?void 0:e.map((function(e){var t=e.blockHeight,n=e.fundsPledged;return{x:parseInt(t),y:g(n)}}))},x=f(s),p=f(n).map((function(e){var t=e.x;return parseInt(t)})),w={labels:p,datasets:[{label:"Basilisk",borderColor:Be,yAxisID:"crowdloanCap",data:x}]},P={backgroundColor:Be,position:"end",enabled:!0,color:Le,font:{family:"Pexico",size:12},xAdjust:10,cornerRadius:0},y=(he()([p[0],p[p.length-1]],[0,p.length]),Object(i.useMemo)((function(){return{pointRadius:0,responsive:!0,maintainAspectRatio:!1,scales:{x:{display:!1},crowdloanCap:{type:"linear",position:"left",display:!1,max:27e4,min:0}},plugins:{tooltip:{enabled:!1},legend:{display:!1},autocolors:!1,annotation:{annotations:{ownRaised:r?{type:"line",value:g(r),borderColor:Be,borderWidth:1,borderDash:[3,3],scaleID:"crowdloanCap",label:Object(S.a)(Object(S.a)({},P),{},{xAdjust:-116,content:Ce()(parseFloat(g(r)),De)})}:null}}}}}),[r,a,l,u,p]));return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"col-9 bsx-graph",children:[Object(m.jsx)("div",{className:"bsx-graph-wrapper",children:h?Object(m.jsx)("iframe",{src:"snek/game.html",id:"gameIframe",className:"gameIframe",width:"100%",height:"100%"}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"bsx-graph-loader",children:["Crowdloan cap has been reached, ",Object(m.jsx)("br",{})," brace for impact."]}),Object(m.jsx)(Ne.a,{id:"1",type:"line",data:w,options:y})]})}),Object(m.jsxs)("div",{className:"bsx-graph-timeline",children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-3",children:"28.8"}),Object(m.jsxs)("div",{className:"col-6 bsx-legend",children:[Object(m.jsx)("span",{className:"basilisk",children:"Basilisk"}),Object(m.jsx)("span",{children:" KSM raised"})]}),Object(m.jsx)("div",{className:"col-3",children:"22.9"})]}),Object(m.jsx)("div",{className:"bsx-progress-bar-container",children:Object(m.jsx)("div",{className:"bsx-progress-bar",style:{width:"0%"}})})]})]})})};Pe.b.register(Ae.a);var Re,Ee,He,_e,Te,Ue,qe,We,Ge,$e={precision:6,decimalSeparator:"."},Me=function(){var e=q(),t=me(),n=t.bsxMultiplier,a=t.hdxBonus,c=function(){var e=G().data.contributions,t=U().data.mostRecentAuctionClosingStart,n=M().parachain.data.fundsPledged;return xe(e,t,String(n))}(),i=function(){var e=G().data,t=e.contributions,n=e.historicalIncentives;return pe(t,n)}(),o=$(),s=re();return{lastProcessedBlock:e,showAccountSelector:s.showAccountSelector,setShowAccountSelector:s.setShowAccountSelector,activeAccount:s.activeAccount,activeAccountBalance:s.activeAccountBalance,totalContributed:G().data.totalContributed,bsxMultiplier:n,hdxBonus:a,currentAccountCurrentBsxReceived:c,currentAccountCurrentHdxReceived:i,ownHasWonAnAuction:o}},Ve=function(){var e=Me(),t=(e.lastProcessedBlock,e.showAccountSelector),n=e.setShowAccountSelector,a=e.activeAccount,c=(e.activeAccountBalance,e.totalContributed),i=e.bsxMultiplier,o=e.hdxBonus,s=e.currentAccountCurrentBsxReceived,r=e.currentAccountCurrentHdxReceived,d=e.ownHasWonAnAuction;return Object(m.jsxs)("div",{className:"bsx-dashboard",children:[Object(m.jsx)("div",{className:"bsx-navbar",children:Object(m.jsx)("div",{className:"container-xl",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-3",children:Object(m.jsx)("div",{className:"bsx-logo",children:"basilisk"})}),Object(m.jsx)("div",{className:"col-9 bsx-menu-col",children:Object(m.jsxs)("div",{className:"bsx-menu",children:[Object(m.jsx)("div",{className:"bsx-menu-item",children:Object(m.jsx)("a",{href:"https://bsx.fi/",target:"_blank",children:"home"})}),Object(m.jsx)("div",{className:"bsx-menu-item",children:Object(m.jsx)("a",{href:"https://discord.gg/S8YZj5aXR6",target:"_blank",children:"discord"})}),Object(m.jsx)("div",{className:"bsx-eye",children:Object(m.jsx)("img",{src:de})}),Object(m.jsx)("div",{className:"bsx-menu-item",children:Object(m.jsx)("a",{href:"https://github.com/galacticcouncil/Basilisk-node",target:"_blank",children:"github"})}),Object(m.jsx)("div",{className:"bsx-menu-item",children:Object(m.jsx)("a",{href:"https://docs.bsx.fi/",target:"_blank",children:"docs"})}),Object(m.jsx)("div",{className:"bsx-menu-item",children:Object(m.jsx)("a",{href:"https://basiliskfi.substack.com/",target:"_blank",children:"blog"})})]})})]})})}),Object(m.jsx)("div",{className:"bsx-account",children:Object(m.jsxs)("div",{className:"container-xl",children:[Object(m.jsxs)("div",{className:"row bsx-account-selector-display",children:[Object(m.jsx)("div",{className:"col-9 bsx-address",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"bsx-chronicle",children:a?"":"No account connected"}),a]})}),Object(m.jsx)("div",{className:"col-3 bsx-select-account",onClick:function(e){return n(!0)},children:a?"change your account":"connect account"})]}),Object(m.jsx)("div",{className:"row bsx-stats",children:Object(m.jsx)("div",{className:"col-12",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-4 bsx-stat",children:[Object(m.jsx)("span",{className:"bsx-stat-title",children:"total ksm contributed"}),Object(m.jsx)("span",{className:"bsx-stat-value",children:Ce()(parseFloat(g(c)),$e)})]}),Object(m.jsxs)("div",{className:"col-4 bsx-stat",children:[Object(m.jsx)("span",{className:"bsx-stat-title",children:"bsx reward"}),Object(m.jsx)("span",{className:"bsx-stat-value",children:s?Ce()(parseFloat(g(s)),$e):"-"})]}),Object(m.jsxs)("div",{className:"col-4 bsx-stat bsx-stat-border-right-none",children:[Object(m.jsx)("span",{className:"bsx-stat-title",children:"hdx reward"}),Object(m.jsx)("span",{className:"bsx-stat-value",children:Ce()(parseFloat(O(v(g(r)))),$e)})]})]})})})]})}),Object(m.jsx)("div",{className:"container-xl",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)(Fe,{}),Object(m.jsxs)("div",{className:"col-3 bsx-contribute",children:[Object(m.jsx)("div",{className:"bsx-incentives",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"bsx-incentive",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-6 name",children:Object(m.jsx)("span",{children:"hdx bonus"})}),Object(m.jsx)("div",{className:"col-6 value",children:Object(m.jsx)("span",{children:d?"-":o?o.toFixed(2):"-"})})]})}),Object(m.jsx)("div",{className:"bsx-incentive",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-8 name",children:Object(m.jsx)("span",{children:"bsx multiplier"})}),Object(m.jsx)("div",{className:"col-4 value",children:Object(m.jsx)("span",{children:d?"-":i?i.toFixed(2):"-"})})]})})]})}),Object(m.jsx)("div",{children:Object(m.jsx)(we,{connectAccount:function(){return n(!0)},totalContributionWeight:"0"})})]})]})}),Object(m.jsx)("div",{className:"bsx-wallpaper",children:Object(m.jsx)("img",{src:le})}),t?Object(m.jsx)(ye,{onAccountSelect:function(){return n(!1)}}):Object(m.jsx)(m.Fragment,{})]})},ze=n(59),Je=n(498),Ze=n(501),Ke='\n    chronicleByUniqueInput(where: {id: "'.concat("chronicle",'"}) {\n        lastProcessedBlock\n        mostRecentAuctionClosingStart\n        mostRecentAuctionStart\n    }\n'),Qe=Object(Je.a)(Re||(Re=Object(ze.a)(["\n    query HistoricalFundsPledged($parachainId: ID!, $blockHeight: BigInt!) {\n        ","\n    }\n"])),"\n    historicalParachainFundsPledgeds(where: {parachain: {id_eq: $parachainId}, blockHeight_gte: $blockHeight}, limit: 1000) {\n        fundsPledged\n        blockHeight\n    }\n"),Xe=Object(Je.a)(Ee||(Ee=Object(ze.a)(["\n    query FundsPledged($parachainId: ID!) {\n        ","\n    }\n"])),"\n    parachainByUniqueInput(where: {id: $parachainId}) {\n        fundsPledged\n    }\n"),Ye='\n    incentiveByUniqueInput(where: {id: "'.concat("incentive",'"}) {\n        totalContributionWeight\n        leadPercentageRate,\n        siblingParachain {\n            id\n        }\n    }\n'),et=Object(Je.a)(He||(He=Object(ze.a)(["\n    query InitialData {\n        ","\n        ","\n        ","\n        ","\n    }\n"])),Ke,(We=p.ownParachainId,Ge=p.ownCrowdloanBlockHeight,'\n    historicalParachainFundsPledgeds(where: {parachain: {id_eq: "'.concat(We,'"}, blockHeight_gte: "').concat(Ge,'"}, limit: 1000) {\n        fundsPledged\n        blockHeight\n    }\n')),function(e){return'\n    parachainByUniqueInput(where: {id: "'.concat(e,'"}) {\n        fundsPledged,\n        hasWonAnAuction\n    }\n')}(p.ownParachainId),Ye),tt=Object(Je.a)(_e||(_e=Object(ze.a)(["\n    query HistoricalIncentives($blockHeights: [BigInt!]) {\n        ","\n    }\n"])),"\n    historicalIncentives(where: {blockHeight_in: $blockHeights}) {\n        blockHeight\n        leadPercentageRate\n    }\n"),nt=Object(Je.a)(Te||(Te=Object(ze.a)(["\n    query ContributionsByAccountId($accountId: ID!) {\n        ","\n    }\n"])),"\n    accountByUniqueInput(where: {id: $accountId}) {\n        totalContributed\n        contributions {\n            crowdloan {\n                id\n            }\n            blockHeight\n            balance\n        }\n    }\n"),at=Object(Je.a)(Ue||(Ue=Object(ze.a)(["\n    query Chronicle {\n        ","\n    }\n"])),Ke),ct=Object(Je.a)(qe||(qe=Object(ze.a)(["\n    query Incentives {\n        ","\n    }\n"])),Ye),it=function(e){return Object(Ze.a)(Xe,{variables:{parachainId:e}})},ot=function(e){var t,n;return(null===(t=e.data)||void 0===t||null===(n=t.accountByUniqueInput)||void 0===n?void 0:n.contributions.filter((function(e){return e.crowdloan.id===p.ownParachainId})).map((function(e){return{balance:e.balance,blockHeight:e.blockHeight,crowdloan:e.crowdloan}})))||[]},st=function(){var e,t,n=E(),o=G(),s=re(),r=s.activeAccount,d=s.activeAccountBalance,l=(e=r,Object(Ze.a)(nt,{variables:{accountId:e}})),u=Object(A.a)(l,2),b=u[0],j=u[1],h=(t=j?ot(j).map((function(e){return e.blockHeight})):[],Object(Ze.a)(tt,{variables:{blockHeights:t}})),g=Object(A.a)(h,2),v=g[0],O=g[1],f=q();Object(i.useEffect)((function(){o.loading!==c.Loading&&n({type:a.LoadAccountData})}),[r,d,f]),Object(i.useEffect)((function(){o.loading==c.Loading&&b()}),[o.loading]),Object(i.useEffect)((function(){j.data&&v()}),[j.data,j.loading]),Object(i.useEffect)((function(){if(!j.loading&&j.called){var e=function(){var e,t;return(null===(e=j.data)||void 0===e||null===(t=e.accountByUniqueInput)||void 0===t?void 0:t.totalContributed)||"0"}(),t=ot(j),c=function(){var e;return(null===(e=O.data)||void 0===e?void 0:e.historicalIncentives)||[]}();n({type:a.SetAccountData,payload:{totalContributed:e,contributions:t,historicalIncentives:c}})}}),[j,O])},rt=function(){var e=E(),t=U(),n=Object(Ze.a)(at),o=Object(A.a)(n,2),s=o[0],r=o[1];Object(i.useEffect)((function(){var t=setInterval((function(){te.a.debug("useChronicleData","fetching chronicle"),e({type:a.LoadChronicleData})}),p.chronicleRefetchTimeout);return function(){return clearInterval(t)}}),[]),Object(i.useEffect)((function(){t.loading==c.Loading&&s()}),[t.loading]),Object(i.useEffect)((function(){if(!r.loading&&r.called){var t=function(){var e,t,n;return{lastProcessedBlock:(null===(e=r.data)||void 0===e?void 0:e.chronicleByUniqueInput.lastProcessedBlock)||"0",mostRecentAuctionStart:null===(t=r.data)||void 0===t?void 0:t.chronicleByUniqueInput.mostRecentAuctionStart,mostRecentAuctionClosingStart:null===(n=r.data)||void 0===n?void 0:n.chronicleByUniqueInput.mostRecentAuctionClosingStart}}();e({type:a.SetChronicleData,payload:t})}}),[r])},dt=function(){var e=q(),t=_(),n=T(),o=E(),s=W(),r=Object(Ze.a)(ct),d=Object(A.a)(r,2),l=d[0],u=d[1];Object(i.useEffect)((function(){t&&e&&e!==n&&o({type:a.LoadIncentiveData})}),[t,e,n]),Object(i.useEffect)((function(){s.loading===c.Loading&&l()}),[s.loading]),Object(i.useEffect)((function(){if(!u.loading&&u.called&&u.data){var e=function(){var e,t=(null===(e=u.data)||void 0===e?void 0:e.incentiveByUniqueInput)||{leadPercentageRate:"0",totalContributionWeight:"0"},n=t.leadPercentageRate,a=t.totalContributionWeight,c=t.siblingParachain;return{leadPercentageRate:n,totalContributionWeight:a,siblingParachain:{id:null===c||void 0===c?void 0:c.id}}}();o({type:a.SetIncentiveData,payload:e})}}),[u])},lt=function(){var e=E(),t=H().initial.loading===c.Loading,n=_(),o=Object(Ze.a)(et),s=Object(A.a)(o,2),r=s[0],d=s[1];Object(i.useEffect)((function(){te.a.debug("useInitialData","loading"),e({type:a.LoadInitialData})}),[]),Object(i.useEffect)((function(){t&&!n&&r()}),[t]),Object(i.useEffect)((function(){if(!d.loading&&d.called&&d.data&&t){var n=function(){var e,t=(null===(e=d.data)||void 0===e?void 0:e.chronicleByUniqueInput)||{lastProcessedBlock:"0"};return{lastProcessedBlock:t.lastProcessedBlock,mostRecentAuctionStart:t.mostRecentAuctionStart,mostRecentAuctionClosingStart:t.mostRecentAuctionClosingStart}}(),c=d.data.historicalParachainFundsPledgeds.map((function(e){return{fundsPledged:e.fundsPledged,blockHeight:e.blockHeight}})),i=d.data.parachainByUniqueInput,o=function(){var e,t=(null===(e=d.data)||void 0===e?void 0:e.incentiveByUniqueInput)||{leadPercentageRate:"0",totalContributionWeight:"0"},n=t.leadPercentageRate,a=t.totalContributionWeight,c=t.siblingParachain;return{leadPercentageRate:n,totalContributionWeight:a,siblingParachain:{id:null===c||void 0===c?void 0:c.id}}}();te.a.debug("useInitialData","done loading",{chronicle:n,ownHistoricalFundsPledged:c,ownParachain:i,incentives:o}),e({type:a.SetInitialData,payload:{chronicle:n,ownHistoricalFundsPledged:c,ownParachain:i,incentives:o}})}}),[d.data,t])},ut=function(){var e=W().data.siblingParachain.id,t=q(),n=(_(),T(),E()),o=V(),s=Object(i.useState)(e),r=Object(A.a)(s,2),d=r[0],l=r[1],u=function(e,t){return Object(Ze.a)(Qe,{variables:{parachainId:e,blockHeight:t}})}(e||"",p.ownCrowdloanBlockHeight),b=Object(A.a)(u,2),j=b[0],h=b[1],g=it(e||""),v=Object(A.a)(g,2),O=v[0],f=v[1];Object(i.useEffect)((function(){e&&e!==d&&o.historicalFundsPledged.loading!==c.Loading&&(l(e),n({type:a.LoadHistoricalSiblingFundsPledgedData}))}),[e,d,l]),Object(i.useEffect)((function(){o.historicalFundsPledged.loading&&(h.loading||o.historicalFundsPledged.loading===c.Loading&&j())}),[o.historicalFundsPledged.loading,h]),Object(i.useEffect)((function(){if(h.data&&o.historicalFundsPledged.loading===c.Loading&&!h.loading&&h.called){var e=h.data.historicalParachainFundsPledgeds;n({type:a.SetHistoricalSiblingFundsPledgedData,payload:e})}}),[h]),Object(i.useEffect)((function(){e&&t&&o.parachain.loading!==c.Loading&&n({type:a.LoadLatestSiblingFundsPledgedData})}),[e,t]),Object(i.useEffect)((function(){o.parachain.loading===c.Loading&&O()}),[o.parachain.loading]),Object(i.useEffect)((function(){if(!f.loading&&f.called&&f.data){var e=function(){var e;return null===(e=f.data.parachainByUniqueInput)||void 0===e?void 0:e.fundsPledged}(),t=function(){var e;return null===(e=f.data.parachainByUniqueInput)||void 0===e?void 0:e.hasWonAnAuction}();n({type:a.SetLatestSiblingFundsPledgedData,payload:{fundsPledged:e,hasWonAnAuction:t}})}}),[f])},bt=Object(y.a)((function(){lt(),st(),rt(),dt(),ut(),function(){var e=p.ownParachainId,t=q(),n=E(),o=M(),s=it(e||""),r=Object(A.a)(s,2),d=r[0],l=r[1];Object(i.useEffect)((function(){e&&t&&o.parachain.loading!==c.Loading&&n({type:a.LoadLatestOwnFundsPledgedData})}),[e,t]),Object(i.useEffect)((function(){o.parachain.loading===c.Loading&&d()}),[o.parachain.loading]),Object(i.useEffect)((function(){if(!l.loading&&l.called&&l.data){var e=function(){var e;return null===(e=l.data.parachainByUniqueInput)||void 0===e?void 0:e.fundsPledged}(),t=function(){var e;return null===(e=l.data.parachainByUniqueInput)||void 0===e?void 0:e.hasWonAnAuction}();n({type:a.SetLatestOwnFundsPledgedData,payload:{fundsPledged:e,hasWonAnAuction:t}})}}),[l])}()})),jt=Object(A.a)(bt,2),ht=jt[0];jt[1];var gt=function(){return Object(m.jsx)(P,{children:Object(m.jsx)(F,{children:Object(m.jsx)(se,{children:Object(m.jsx)(ht,{children:Object(m.jsx)(Ve,{})})})})})},vt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,505)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),i(e),o(e)}))},Ot=function(){var e=new URL(document.location).searchParams;return console.log("loglevel",e.get("loglevel")),e.get("loglevel")}()||"info";te.a.setLevel(Ot),r.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(gt,{})}),document.getElementById("root")),vt()}},[[445,1,2]]]);
//# sourceMappingURL=main.546434b1.chunk.js.map