(this["webpackJsonpBasilisk-crowdloan-ui"]=this["webpackJsonpBasilisk-crowdloan-ui"]||[]).push([[0],{282:function(e,t,n){},283:function(e,t,n){},294:function(e,t){},298:function(e,t){},299:function(e,t){},323:function(e,t,n){},324:function(e,t,n){},325:function(e,t,n){},437:function(e,t,n){"use strict";n.r(t);var a,c,i=n(15),s=n.n(i),o=n(242),l=n.n(o),r=(n(282),n(283),n(472)),d=n(474),u=n(462),b=n(26),j=n.n(b),h=function(e){return new j.a(e).multipliedBy(new j.a(10).exponentiatedBy(12)).toFixed(12)},g=function(e){return new j.a(e).dividedBy(new j.a(10).exponentiatedBy(12)).toFixed(12)},v=function(e){return new j.a(e).multipliedBy(p.ksmToUsd).toFixed(12)},O=function(e){return new j.a(e).dividedBy(p.hdxToUsd).toFixed(12)},x=new j.a("10").pow("6"),f=new j.a("10").pow("12"),p={processorUrl:"https://api-crowdloan-basilisk.hydradx.io/graphql",nodeUrl:"wss://ksm-arch-01.hydration.cloud",ownParachainId:"2090",ownCrowdloanBlockHeight:"8979298",dappName:"Basilisk Crowdloan",chronicleRefetchTimeout:6e3,auctionEndingPeriodLength:72e3,crowdloanCap:new j.a(h(new j.a("222222"))),opportunityCost:new j.a("0.1375"),ksmToUsd:"400",hdxToUsd:"0.08059",ksmPrecision:12,displayPrecision:6,chart:{historicalDataSpan:600,blocksPerDay:14400,auctionClosingStart:9035066},incentives:{hdx:{leadPercentageRateCliffRange:[new j.a("15").multipliedBy(x).toNumber(),new j.a("20").multipliedBy(x).toNumber()],scale:{max:30,min:5}},bsx:{allocated:new j.a(h(new j.a("15000000000"))),scale:{max:1,min:0}}}},m=n(9),w=new r.a({uri:p.processorUrl,cache:new d.a,defaultOptions:{watchQuery:{fetchPolicy:"network-only"},query:{fetchPolicy:"network-only"}}}),P=function(e){var t=e.children;return Object(m.jsx)(u.a,{client:w,children:t})},y=n(1),S=n(25),A=n(112);!function(e){e.LoadInitialData="LOAD_INITIAL_DATA",e.SetInitialData="SET_INITIAL_DATA_SUCCESS",e.LoadChronicleData="LOAD_CHRONICLE_DATA",e.SetChronicleData="SET_CHRONICLE_DATA",e.LoadAccountData="LOAD_ACCOUNT_DATA",e.SetAccountData="SET_ACCOUNT_DATA",e.LoadIncentiveData="LOAD_INCENTIVE_DATA",e.SetIncentiveData="SET_INCENTIVE_DATA",e.LoadHistoricalSiblingFundsPledgedData="LOAD_HISTORICAL_SIBLING_FUNDS_PLEDGED_DATA",e.SetHistoricalSiblingFundsPledgedData="SET_HISTORICAL_SIBLING_FUNDS_PLEDGED_DATA",e.LoadLatestOwnFundsPledgedData="LOAD_LATEST_OWN_FUNDS_PLEDGED_DATA",e.SetLatestOwnFundsPledgedData="SET_LATEST_OWN_FUNDS_PLEDGED_DATA",e.LoadLatestSiblingFundsPledgedData="LOAD_LATEST_SIBLING_FUNDS_PLEDGED_DATA",e.SetLatestSiblingFundsPledgedData="SET_LATEST_SIBLING_FUNDS_PLEDGED_DATA"}(a||(a={})),function(e){e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded"}(c||(c={}));var N=function(e){return{loading:c.Initial,data:e}},C=function(e){return{loading:c.Loading,data:e}},D=function(e){return{loading:c.Loaded,data:e}},I={initial:N({initializedAtBlockHeight:void 0}),chronicle:N({lastProcessedBlock:"0",mostRecentAuctionStart:void 0,mostRecentAuctionClosingStart:void 0}),incentives:N({leadPercentageRate:"0",totalContributionWeight:"0",siblingParachain:{id:void 0}}),account:N({totalContributed:"0",contributions:[],historicalIncentives:[]}),own:{historicalFundsPledged:N([]),parachain:N({fundsPledged:"0"})},sibling:{historicalFundsPledged:N([]),parachain:N({fundsPledged:"0"})}},k=function(e,t){switch(t.type){case a.LoadInitialData:return Object(S.a)(Object(S.a)({},e),{},{initial:C(e.initial.data)});case a.SetInitialData:return Object(S.a)(Object(S.a)({},e),{},{initial:D({initializedAtBlockHeight:t.payload.chronicle.lastProcessedBlock}),chronicle:D(t.payload.chronicle),incentives:D(t.payload.incentives),own:{historicalFundsPledged:D(t.payload.ownHistoricalFundsPledged),parachain:D(t.payload.ownParachainFundsPledged)}});case a.LoadAccountData:return Object(S.a)(Object(S.a)({},e),{},{account:C(e.account.data)});case a.SetAccountData:return Object(S.a)(Object(S.a)({},e),{},{account:D(t.payload)});case a.LoadChronicleData:return Object(S.a)(Object(S.a)({},e),{},{chronicle:C(e.chronicle.data)});case a.SetChronicleData:return Object(S.a)(Object(S.a)({},e),{},{chronicle:D(t.payload)});case a.LoadIncentiveData:return Object(S.a)(Object(S.a)({},e),{},{incentives:C(e.incentives.data)});case a.SetIncentiveData:return Object(S.a)(Object(S.a)({},e),{},{incentives:D(t.payload)});case a.LoadHistoricalSiblingFundsPledgedData:return Object(S.a)(Object(S.a)({},e),{},{sibling:Object(S.a)(Object(S.a)({},e.sibling),{},{historicalFundsPledged:C(e.sibling.historicalFundsPledged.data)})});case a.SetHistoricalSiblingFundsPledgedData:return Object(S.a)(Object(S.a)({},e),{},{sibling:Object(S.a)(Object(S.a)({},e.sibling),{},{historicalFundsPledged:D(t.payload)})});case a.LoadLatestSiblingFundsPledgedData:return Object(S.a)(Object(S.a)({},e),{},{sibling:Object(S.a)(Object(S.a)({},e.sibling),{},{parachain:C(e.sibling.parachain.data)})});case a.SetLatestSiblingFundsPledgedData:return Object(S.a)(Object(S.a)({},e),{},{sibling:Object(S.a)(Object(S.a)({},e.sibling),{},{parachain:D(t.payload)})});case a.LoadLatestOwnFundsPledgedData:return Object(S.a)(Object(S.a)({},e),{},{own:Object(S.a)(Object(S.a)({},e.own),{},{parachain:C(e.own.parachain.data)})});case a.SetLatestOwnFundsPledgedData:return Object(S.a)(Object(S.a)({},e),{},{own:Object(S.a)(Object(S.a)({},e.own),{},{parachain:D(t.payload)})});default:return e}},B=Object(A.a)((function(){var e=Object(i.useReducer)(k,I),t=Object(y.a)(e,2);return{state:t[0],dispatch:t[1]}})),F=Object(y.a)(B,2),L=F[0],R=F[1],E=function(){return R().dispatch},_=function(){return R().state},H=function(){return _().initial.loading===c.Loaded},T=function(){return _().initial.data.initializedAtBlockHeight},U=function(){return _().chronicle},q=function(){return U().data.lastProcessedBlock},W=function(){return _().incentives},G=function(){return _().account},M=function(){return _().sibling},$=n(22),V=n.n($),z=n(28),J=n(475),Z=n(471),K=n(183),Q=n(463),X=n(48),Y=n.n(X),ee=n(477),te=n(263),ne={address:function(){var e=new URL(document.location).searchParams;return Y.a.debug("account",e.get("account")),e.get("account")}()||""},ae=Object(A.a)((function(){var e=Object(i.useState)([]),t=Object(y.a)(e,2),n=t[0],a=t[1],c=Object(Q.a)("bsx-crowdloan-account",ne.address),s=Object(y.a)(c,2),o=s[0],l=s[1];o=o?Object(ee.a)(Object(te.a)(o),2):"";var r=Object(i.useState)("0"),d=Object(y.a)(r,2),u=d[0],b=d[1],h=Object(i.useState)(!1),g=Object(y.a)(h,2),v=g[0],O=g[1],x=Object(i.useState)(!1),f=Object(y.a)(x,2),m=(f[0],f[1]),w=Object(i.useState)(void 0),P=Object(y.a)(w,2),A=P[0],N=P[1],C=Object(i.useState)(void 0),D=Object(y.a)(C,2),I=D[0],k=D[1],B=U();Object(i.useEffect)((function(){setTimeout(Object(z.a)(V.a.mark((function e(){var t,n,c,i;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y.a.debug("usePolkadot","loading initial"),m(!0),e.next=4,Object(K.b)(p.dappName);case 4:return t=e.sent,e.next=7,Object(K.a)();case 7:return n=e.sent.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{address:Object(ee.a)(Object(te.a)(e.address),2)})})),c=new J.a(p.nodeUrl),e.next=11,Z.a.create({provider:c});case 11:i=e.sent,Y.a.debug("usePolkadot","loaded",t,i,n),a(n),N(i),m(!1);case 16:case"end":return e.stop()}}),e)}))),300)}),[]);var F=function(){var e=Object(z.a)(V.a.mark((function e(){var t,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A&&o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,A.query.system.account(o);case 4:t=e.sent,n=t.data,Y.a.debug("usePolkadot","balance",n.free.toString()),b(n.free.toString());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&A&&F()}),[o,A,B.data.lastProcessedBlock]),{accounts:n,setActiveAccount:l,activeAccount:o,activeAccountBalance:u,lastContributionStatus:I,showAccountSelector:v,setShowAccountSelector:O,contribute:function(){var e=Object(z.a)(V.a.mark((function e(t){var n,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=2;break}return e.abrupt("return");case 2:if(o){e.next=4;break}return e.abrupt("return");case 4:return m(!0),e.next=7,Object(K.c)(o);case 7:n=e.sent,a=n.signer,Object(z.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("amount",new j.a(t).toFixed(0));try{A.tx.crowdloan.contribute(p.ownParachainId,new j.a(t).toFixed(0),null).signAndSend(o,{signer:a},(function(e){var t=e.status,n=e.events;console.log("status",t,t.toHuman()),(t.isInBlock||t.isFinalized)&&(n.filter((function(e){var t=e.event;return A.events.system.ExtrinsicFailed.is(t)})).length?k(!1):k(!0))})),F()}catch(n){console.error(n),k(!1)}m(!1);case 3:case"end":return e.stop()}}),e)})))();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})),ce=Object(y.a)(ae,2),ie=ce[0],se=ce[1],oe=(n(323),n.p+"static/media/Logo-dark-2-clean.cbd38319.png"),le=n.p+"static/media/basilisk-wallpaper-2.cc01249c.png",re=n(136),de=n.n(re),ue=(n(324),n(207)),be=n.n(ue),je=n(260),he=function(e){var t=new j.a(e),n=p.incentives.hdx.leadPercentageRateCliffRange[0],a=p.incentives.hdx.leadPercentageRateCliffRange[1];return t.lt(n)?p.incentives.hdx.scale.max:t.gt(a)?p.incentives.hdx.scale.min:be()([n,a],[p.incentives.hdx.scale.max,p.incentives.hdx.scale.min])(e)},ge=function(e,t){if(!t)return p.incentives.bsx.scale.max;var n=new j.a(t).plus(p.auctionEndingPeriodLength).toNumber(),a=new j.a(e);return a.lt(t)?p.incentives.bsx.scale.max:a.gt(n)?p.incentives.bsx.scale.min:be()([parseInt(t),n],[p.incentives.bsx.scale.max,p.incentives.bsx.scale.min])(e)},ve=function(e,t){return e.reduce((function(e,n){var a=ge(n.blockHeight,t);return e=e.plus(new j.a(n.balance).multipliedBy(a))}),new j.a(0))},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=ve(e,t),a=p.incentives.bsx.allocated.dividedBy(p.crowdloanCap.multipliedBy(p.incentives.bsx.scale.max)).multipliedBy(n);return a},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=ve(e,t),c=new j.a(n).dividedBy(x);if(c.isZero())return new j.a(0);var i=p.incentives.bsx.allocated.dividedBy(c).multipliedBy(a);return i},fe=function(e,t){return e.reduce((function(e,n){var a=Object(je.find)(t,{blockHeight:"".concat(n.blockHeight)}),c=(null===a||void 0===a?void 0:a.leadPercentageRate)||"0",i=he(c),s=new j.a(n.balance).multipliedBy(new j.a(p.opportunityCost)).multipliedBy(new j.a(i)).dividedBy(new j.a(100));return e=e.plus(s)}),new j.a("0"))},pe=function(e){var t=e.connectAccount,n=se(),a=n.activeAccountBalance,c=n.lastContributionStatus,s=n.contribute,o=n.activeAccount,l=Object(i.useState)(void 0),r=Object(y.a)(l,2),d=r[0],u=r[1],b={minimalBsxReceived:"0",currentBsxReceived:"0",currentHdxReceived:"0"},w=Object(i.useState)(b),P=Object(y.a)(w,2),S=P[0],A=P[1],N=U().data,C=N.lastProcessedBlock,D=N.mostRecentAuctionClosingStart,I=W().data,k=I.totalContributionWeight,B=I.leadPercentageRate,F=function(){var e;return(null===(e=_().own.parachain.data)||void 0===e?void 0:e.fundsPledged)||"222000000000000"}();Object(i.useEffect)((function(){var e=[{blockHeight:C,balance:new j.a(d||0).multipliedBy(f).toFixed(0),crowdloan:{id:p.ownParachainId}}];if(!d)return A(b);var t=Oe(e,D),n=new j.a(e[0].balance).multipliedBy(ge(C,D)).multipliedBy(x),a=new j.a(k).plus(n).toFixed(0),c=xe(e,D,a),i=O(v(fe(e,[{blockHeight:C,leadPercentageRate:B}])));A({minimalBsxReceived:new j.a(g(t)).toFixed(p.displayPrecision),currentBsxReceived:new j.a(g(c)).toFixed(p.displayPrecision),currentHdxReceived:new j.a(g(i)).toFixed(p.displayPrecision)})}),[C,B,D,k,d]);Object(i.useEffect)((function(){c&&u(0)}),[c]);var L=function(){};return Object(m.jsxs)("div",{className:"bsx-contribute-form",children:[Object(m.jsxs)("div",{className:"bsx-form-wrapper",children:[Object(m.jsx)("label",{children:"ksm contribution"}),Object(m.jsx)(de.a,{name:"amount",decimalsLimit:12,value:d,disabled:!1,allowNegativeValue:!1,placeholder:"Sacrifice goes here",intlConfig:{locale:"en-US"},onValueChange:function(e){if(Y.a.debug("CrowdloanContributeForm","handleContributeChange",e,a),void 0==e)return u(void 0);p.crowdloanCap.minus(F).lt(h(e))||u(e)}}),Object(m.jsx)("label",{children:"minimal bsx received"}),Object(m.jsx)(de.a,{name:"minimal bsx received",disabled:!0,value:S.minimalBsxReceived,onValueChange:L}),Object(m.jsx)("label",{children:"current bsx received"}),Object(m.jsx)(de.a,{name:"current bsx received",disabled:!0,value:S.currentBsxReceived,onValueChange:L}),Object(m.jsx)("label",{children:"current hdx received"}),Object(m.jsx)(de.a,{name:"current hdx received",disabled:!0,value:S.currentHdxReceived,onValueChange:L}),o?Object(m.jsx)("button",{disabled:!d||0==d,onClick:function(){Y.a.debug("CrowdloanContributeForm","handleContributeClick",d),s(h(d))},children:"Contribute"}):Object(m.jsx)("button",{onClick:t,children:"Connect Account"})]}),Object(m.jsx)("div",{className:"contribution-status",children:c?"Thanksss for your sacrifice":0==c?"There was a problem with your contribution, please try again.":""})]})},me=n(41),we=n(177),Pe=n(470),ye=(n(325),function(e){var t=e.onAccountSelect,n=se(),a=n.accounts,c=n.setActiveAccount,s=Object(i.useRef)(null);Object(Pe.a)(s,(function(){t()}));return Object(m.jsx)("div",{className:"bsx-account-selector",children:Object(m.jsx)("div",{className:"bsx-account-selector-backdrop",children:Object(m.jsxs)("div",{className:"bsx-account-selector-modal",ref:s,children:[Object(m.jsx)("div",{className:"title",children:"Select an account"}),a&&a.length?a.map((function(e){return Object(m.jsxs)("div",{className:"account",onClick:function(n){return a=e.address,c(a),void t();var a},children:[Object(m.jsx)("p",{className:"name",children:e.meta.name}),Object(m.jsx)("p",{className:"address",children:e.address})]},e.address)})):Object(m.jsx)("div",{className:"bsx-loading-accounts",children:"Loading accounts"}),Object(m.jsx)("div",{})]})})})}),Se=n(82),Ae=n.n(Se),Ne=n(179);me.b.register(we.a);var Ce={precision:6,decimalSeparator:"."};Ne.b.animation=!1;var De="#ffe733",Ie="#90ff33",ke="#171b22",Be=function(){var e=M(),t=function(){var t=e.historicalFundsPledged,n=e.parachain.data.fundsPledged;return{siblingHistoricalFundsPledged:t.data,siblingFundsPledged:n}}(),n=t.siblingHistoricalFundsPledged,a=t.siblingFundsPledged,c=_().own,s=function(){var e=c.historicalFundsPledged,t=c.parachain.data.fundsPledged;return{ownHistoricalFundsPledged:e.data,ownFundsPledged:t}}(),o=s.ownHistoricalFundsPledged,l=s.ownFundsPledged,r=U().data.lastProcessedBlock,d=function(e){return null===e||void 0===e?void 0:e.map((function(e){var t=e.blockHeight,n=e.fundsPledged;return{x:t,y:g(n)}}))},u=d(o),b=d(n),j=b.map((function(e){return e.x})),h={labels:j,datasets:[{labels:j,label:"Sibling",borderColor:De,yAxisID:"crowdloanCap",data:b},{label:"Basilisk",borderColor:Ie,yAxisID:"crowdloanCap",data:u}]},v={backgroundColor:Ie,position:"end",enabled:!0,color:ke,font:{family:"Pexico",size:12},xAdjust:10,cornerRadius:0},O=Object(i.useMemo)((function(){return{pointRadius:0,responsive:!0,maintainAspectRatio:!1,scales:{x:{display:!1},crowdloanCap:{type:"linear",position:"left",display:!1,max:2e5,min:0}},plugins:{tooltip:{enabled:!1},legend:{display:!1},autocolors:!1,annotation:{annotations:{siblingRaised:a?{type:"line",borderWidth:1,borderDash:[3,3],scaleID:"crowdloanCap",value:g(a),borderColor:De,label:Object(S.a)(Object(S.a)({},v),{},{xAdjust:-8,backgroundColor:De,content:Ae()(parseFloat(g(a)),Ce)})}:null,ownRaised:l?{type:"line",value:g(l),borderColor:Ie,borderWidth:1,borderDash:[3,3],scaleID:"crowdloanCap",label:Object(S.a)(Object(S.a)({},v),{},{xAdjust:-116,content:Ae()(parseFloat(g(l)),Ce)})}:null}}}}}),[l,a,r]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"col-9 bsx-graph",children:[Object(m.jsxs)("div",{className:"bsx-graph-wrapper",children:[Object(m.jsx)("div",{className:"bsx-annotation-container"}),Object(m.jsx)(Ne.a,{id:"1",type:"line",data:h,options:O})]}),Object(m.jsxs)("div",{className:"bsx-graph-timeline",children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-3",children:"28.8"}),Object(m.jsxs)("div",{className:"col-6 bsx-legend",children:[Object(m.jsx)("span",{className:"basilisk",children:"Basilisk"})," / ",Object(m.jsx)("span",{className:"sibling",children:"Target"})," KSM raised"]}),Object(m.jsx)("div",{className:"col-3",children:"NOW"})]}),Object(m.jsx)("div",{className:"bsx-progress-bar-container",children:Object(m.jsx)("div",{className:"bsx-progress-bar",style:{width:"0%"}})})]})]})})};me.b.register(we.a);var Fe,Le,Re,Ee,_e,He,Te,Ue,qe,We={precision:6,decimalSeparator:"."},Ge=function(){var e=q(),t=function(){var e=W(),t=q(),n=U().data.mostRecentAuctionClosingStart;if(e.loading!==c.Loaded)return{bsxMultiplier:void 0,hdxBonus:void 0};var a=new j.a(he(e.data.leadPercentageRate));return{bsxMultiplier:new j.a(ge(t,n)),hdxBonus:a}}(),n=t.bsxMultiplier,a=t.hdxBonus,i=function(){var e=G().data.contributions,t=U().data.mostRecentAuctionClosingStart;return Oe(e,t)}(),s=function(){var e=G().data.contributions,t=U().data.mostRecentAuctionClosingStart,n=W().data.totalContributionWeight;return xe(e,t,n)}(),o=function(){var e=G().data,t=e.contributions,n=e.historicalIncentives;return fe(t,n)}(),l=se();return{lastProcessedBlock:e,showAccountSelector:l.showAccountSelector,setShowAccountSelector:l.setShowAccountSelector,activeAccount:l.activeAccount,activeAccountBalance:l.activeAccountBalance,totalContributed:G().data.totalContributed,bsxMultiplier:n,hdxBonus:a,currentAccountMinimumBsxReceived:i,currentAccountCurrentBsxReceived:s,currentAccountCurrentHdxReceived:o}},Me=function(){var e=Ge(),t=e.lastProcessedBlock,n=e.showAccountSelector,a=e.setShowAccountSelector,c=e.activeAccount,i=e.activeAccountBalance,s=e.totalContributed,o=e.bsxMultiplier,l=e.hdxBonus,r=e.currentAccountMinimumBsxReceived,d=e.currentAccountCurrentBsxReceived,u=e.currentAccountCurrentHdxReceived;return Object(m.jsxs)("div",{className:"bsx-dashboard",children:[Object(m.jsx)("div",{className:"bsx-navbar",children:Object(m.jsx)("div",{className:"container-xl",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-3",children:Object(m.jsx)("div",{className:"bsx-logo",children:"basilisk"})}),Object(m.jsx)("div",{className:"col-9 bsx-menu-col",children:Object(m.jsxs)("div",{className:"bsx-menu",children:[Object(m.jsx)("div",{className:"bsx-menu-item",children:Object(m.jsx)("a",{href:"https://bsx.fi/",target:"_blank",children:"home"})}),Object(m.jsx)("div",{className:"bsx-menu-item",children:Object(m.jsx)("a",{href:"https://discord.gg/S8YZj5aXR6",target:"_blank",children:"discord"})}),Object(m.jsx)("div",{className:"bsx-eye",children:Object(m.jsx)("img",{src:oe})}),Object(m.jsx)("div",{className:"bsx-menu-item",children:Object(m.jsx)("a",{href:"https://github.com/galacticcouncil/Basilisk-node",target:"_blank",children:"github"})}),Object(m.jsx)("div",{className:"bsx-menu-item",children:Object(m.jsx)("a",{href:"https://docs.bsx.fi/",target:"_blank",children:"docs"})}),Object(m.jsx)("div",{className:"bsx-menu-item",children:Object(m.jsx)("a",{href:"https://basiliskfi.substack.com/",target:"_blank",children:"blog"})})]})})]})})}),Object(m.jsx)("div",{className:"bsx-account",children:Object(m.jsxs)("div",{className:"container-xl",children:[Object(m.jsxs)("div",{className:"row bsx-account-selector-display",children:[Object(m.jsx)("div",{className:"col-9 bsx-address",children:Object(m.jsxs)("div",{children:[Object(m.jsxs)("span",{className:"bsx-chronicle",children:["#".concat(t),c?" / ":" / No account connected"]}),c]})}),Object(m.jsx)("div",{className:"col-3 bsx-select-account",onClick:function(e){return a(!0)},children:c?"change your account":"connect account"})]}),Object(m.jsxs)("div",{className:"row bsx-stats",children:[Object(m.jsx)("div",{className:"col-9",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-3 bsx-stat",children:[Object(m.jsx)("span",{className:"bsx-stat-title",children:"total ksm contributed"}),Object(m.jsx)("span",{className:"bsx-stat-value",children:Ae()(parseFloat(g(s)),We)})]}),Object(m.jsxs)("div",{className:"col-3 bsx-stat",children:[Object(m.jsx)("span",{className:"bsx-stat-title",children:"minimal bsx received"}),Object(m.jsx)("span",{className:"bsx-stat-value",children:Ae()(parseFloat(g(r)),We)})]}),Object(m.jsxs)("div",{className:"col-3 bsx-stat",children:[Object(m.jsx)("span",{className:"bsx-stat-title",children:"current bsx received"}),Object(m.jsx)("span",{className:"bsx-stat-value",children:d?Ae()(parseFloat(g(d)),We):"-"})]}),Object(m.jsxs)("div",{className:"col-3 bsx-stat",children:[Object(m.jsx)("span",{className:"bsx-stat-title",children:"current hdx reward"}),Object(m.jsx)("span",{className:"bsx-stat-value",children:Ae()(parseFloat(O(v(g(u)))),We)})]})]})}),Object(m.jsxs)("div",{className:"col-3 bsx-stat bsx-stat-balance",children:[Object(m.jsx)("span",{className:"bsx-stat-title",children:"free balance"}),Object(m.jsx)("span",{className:"bsx-stat-value",children:Ae()(parseFloat(g(i)),We)})]})]})]})}),Object(m.jsx)("div",{className:"container-xl",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)(Be,{}),Object(m.jsxs)("div",{className:"col-3 bsx-contribute",children:[Object(m.jsx)("div",{className:"bsx-incentives",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"bsx-incentive",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-6 name",children:Object(m.jsx)("span",{children:"hdx bonus"})}),Object(m.jsx)("div",{className:"col-6 value",children:Object(m.jsx)("span",{children:l?l.toFixed(2):"-"})})]})}),Object(m.jsx)("div",{className:"bsx-incentive",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-8 name",children:Object(m.jsx)("span",{children:"bsx multiplier"})}),Object(m.jsx)("div",{className:"col-4 value",children:Object(m.jsx)("span",{children:o?o.toFixed(2):"-"})})]})})]})}),Object(m.jsx)("div",{children:Object(m.jsx)(pe,{connectAccount:function(){return a(!0)},totalContributionWeight:"0"})})]})]})}),Object(m.jsx)("div",{className:"bsx-wallpaper",children:Object(m.jsx)("img",{src:le})}),n?Object(m.jsx)(ye,{onAccountSelect:function(){return a(!1)}}):Object(m.jsx)(m.Fragment,{})]})},$e=n(91),Ve=n(473),ze=n(476),Je='\n    chronicleByUniqueInput(where: {id: "'.concat("chronicle",'"}) {\n        lastProcessedBlock\n        mostRecentAuctionClosingStart\n        mostRecentAuctionStart\n    }\n'),Ze=Object(Ve.a)(Fe||(Fe=Object($e.a)(["\n    query HistoricalFundsPledged($parachainId: ID!, $blockHeight: BigInt!) {\n        ","\n    }\n"])),"\n    historicalParachainFundsPledgeds(where: {parachain: {id_eq: $parachainId}, blockHeight_gte: $blockHeight}, limit: 1000) {\n        fundsPledged\n        blockHeight\n    }\n"),Ke=Object(Ve.a)(Le||(Le=Object($e.a)(["\n    query FundsPledged($parachainId: ID!) {\n        ","\n    }\n"])),"\n    parachainByUniqueInput(where: {id: $parachainId}) {\n        fundsPledged\n    }\n"),Qe='\n    incentiveByUniqueInput(where: {id: "'.concat("incentive",'"}) {\n        totalContributionWeight\n        leadPercentageRate,\n        siblingParachain {\n            id\n        }\n    }\n'),Xe=Object(Ve.a)(Re||(Re=Object($e.a)(["\n    query InitialData {\n        ","\n        ","\n        ","\n        ","\n    }\n"])),Je,(Ue=p.ownParachainId,qe=p.ownCrowdloanBlockHeight,'\n    historicalParachainFundsPledgeds(where: {parachain: {id_eq: "'.concat(Ue,'"}, blockHeight_gte: "').concat(qe,'"}) {\n        fundsPledged\n        blockHeight\n    }\n')),function(e){return'\n    parachainByUniqueInput(where: {id: "'.concat(e,'"}) {\n        fundsPledged\n    }\n')}(p.ownParachainId),Qe),Ye=Object(Ve.a)(Ee||(Ee=Object($e.a)(["\n    query HistoricalIncentives($blockHeights: [BigInt!]) {\n        ","\n    }\n"])),"\n    historicalIncentives(where: {blockHeight_in: $blockHeights}) {\n        blockHeight\n        leadPercentageRate\n    }\n"),et=Object(Ve.a)(_e||(_e=Object($e.a)(["\n    query ContributionsByAccountId($accountId: ID!) {\n        ","\n    }\n"])),"\n    accountByUniqueInput(where: {id: $accountId}) {\n        totalContributed\n        contributions {\n            crowdloan {\n                id\n            }\n            blockHeight\n            balance\n        }\n    }\n"),tt=Object(Ve.a)(He||(He=Object($e.a)(["\n    query Chronicle {\n        ","\n    }\n"])),Je),nt=Object(Ve.a)(Te||(Te=Object($e.a)(["\n    query Incentives {\n        ","\n    }\n"])),Qe),at=function(e){var t,n;return(null===(t=e.data)||void 0===t||null===(n=t.accountByUniqueInput)||void 0===n?void 0:n.contributions.filter((function(e){return e.crowdloan.id===p.ownParachainId})).map((function(e){return{balance:e.balance,blockHeight:e.blockHeight,crowdloan:e.crowdloan}})))||[]},ct=function(){var e,t,n=E(),s=G(),o=se(),l=o.activeAccount,r=o.activeAccountBalance,d=(e=l,Object(ze.a)(et,{variables:{accountId:e}})),u=Object(y.a)(d,2),b=u[0],j=u[1],h=(t=j?at(j).map((function(e){return e.blockHeight})):[],Object(ze.a)(Ye,{variables:{blockHeights:t}})),g=Object(y.a)(h,2),v=g[0],O=g[1],x=q();Object(i.useEffect)((function(){s.loading!==c.Loading&&n({type:a.LoadAccountData})}),[l,r,x]),Object(i.useEffect)((function(){s.loading==c.Loading&&b()}),[s.loading]),Object(i.useEffect)((function(){j.data&&v()}),[j.data,j.loading]),Object(i.useEffect)((function(){if(!j.loading&&j.called){var e=function(){var e,t;return(null===(e=j.data)||void 0===e||null===(t=e.accountByUniqueInput)||void 0===t?void 0:t.totalContributed)||"0"}(),t=at(j),c=function(){var e;return(null===(e=O.data)||void 0===e?void 0:e.historicalIncentives)||[]}();n({type:a.SetAccountData,payload:{totalContributed:e,contributions:t,historicalIncentives:c}})}}),[j,O])},it=function(){var e=E(),t=U(),n=Object(ze.a)(tt),s=Object(y.a)(n,2),o=s[0],l=s[1];Object(i.useEffect)((function(){var t=setInterval((function(){Y.a.debug("useChronicleData","fetching chronicle"),e({type:a.LoadChronicleData})}),p.chronicleRefetchTimeout);return function(){return clearInterval(t)}}),[]),Object(i.useEffect)((function(){t.loading==c.Loading&&o()}),[t.loading]),Object(i.useEffect)((function(){if(!l.loading&&l.called){var t=function(){var e,t,n;return{lastProcessedBlock:(null===(e=l.data)||void 0===e?void 0:e.chronicleByUniqueInput.lastProcessedBlock)||"0",mostRecentAuctionStart:null===(t=l.data)||void 0===t?void 0:t.chronicleByUniqueInput.mostRecentAuctionStart,mostRecentAuctionClosingStart:null===(n=l.data)||void 0===n?void 0:n.chronicleByUniqueInput.mostRecentAuctionClosingStart}}();e({type:a.SetChronicleData,payload:t})}}),[l])},st=function(){var e=q(),t=H(),n=T(),s=E(),o=W(),l=Object(ze.a)(nt),r=Object(y.a)(l,2),d=r[0],u=r[1];Object(i.useEffect)((function(){t&&e&&e!==n&&s({type:a.LoadIncentiveData})}),[t,e,n]),Object(i.useEffect)((function(){o.loading===c.Loading&&d()}),[o.loading]),Object(i.useEffect)((function(){if(!u.loading&&u.called&&u.data){var e=function(){var e,t=(null===(e=u.data)||void 0===e?void 0:e.incentiveByUniqueInput)||{leadPercentageRate:"0",totalContributionWeight:"0"},n=t.leadPercentageRate,a=t.totalContributionWeight,c=t.siblingParachain;return{leadPercentageRate:n,totalContributionWeight:a,siblingParachain:{id:null===c||void 0===c?void 0:c.id}}}();s({type:a.SetIncentiveData,payload:e})}}),[u])},ot=function(){var e=E(),t=_().initial.loading===c.Loading,n=H(),s=Object(ze.a)(Xe),o=Object(y.a)(s,2),l=o[0],r=o[1];Object(i.useEffect)((function(){Y.a.debug("useInitialData","loading"),e({type:a.LoadInitialData})}),[]),Object(i.useEffect)((function(){t&&!n&&l()}),[t]),Object(i.useEffect)((function(){if(!r.loading&&r.called&&r.data&&t){var n=function(){var e,t=(null===(e=r.data)||void 0===e?void 0:e.chronicleByUniqueInput)||{lastProcessedBlock:"0"};return{lastProcessedBlock:t.lastProcessedBlock,mostRecentAuctionStart:t.mostRecentAuctionStart,mostRecentAuctionClosingStart:t.mostRecentAuctionClosingStart}}(),c=r.data.historicalParachainFundsPledgeds.map((function(e){return{fundsPledged:e.fundsPledged,blockHeight:e.blockHeight}})),i=r.data.parachainByUniqueInput,s=function(){var e,t=(null===(e=r.data)||void 0===e?void 0:e.incentiveByUniqueInput)||{leadPercentageRate:"0",totalContributionWeight:"0"},n=t.leadPercentageRate,a=t.totalContributionWeight,c=t.siblingParachain;return{leadPercentageRate:n,totalContributionWeight:a,siblingParachain:{id:null===c||void 0===c?void 0:c.id}}}();Y.a.debug("useInitialData","done loading",{chronicle:n,ownHistoricalFundsPledged:c,ownParachainFundsPledged:i,incentives:s}),e({type:a.SetInitialData,payload:{chronicle:n,ownHistoricalFundsPledged:c,ownParachainFundsPledged:i,incentives:s}})}}),[r.data,t])},lt=function(){var e=W().data.siblingParachain.id,t=q(),n=(H(),T(),E()),s=M(),o=Object(i.useState)(e),l=Object(y.a)(o,2),r=l[0],d=l[1],u=function(e,t){return Object(ze.a)(Ze,{variables:{parachainId:e,blockHeight:t}})}(e||"",p.ownCrowdloanBlockHeight),b=Object(y.a)(u,2),j=b[0],h=b[1],g=function(e){return Object(ze.a)(Ke,{variables:{parachainId:e}})}(e||""),v=Object(y.a)(g,2),O=v[0],x=v[1];Object(i.useEffect)((function(){e&&e!==r&&s.historicalFundsPledged.loading!==c.Loading&&(d(e),n({type:a.LoadHistoricalSiblingFundsPledgedData}))}),[e,r,d]),Object(i.useEffect)((function(){s.historicalFundsPledged.loading&&(h.loading||s.historicalFundsPledged.loading===c.Loading&&j())}),[s.historicalFundsPledged.loading,h]),Object(i.useEffect)((function(){if(h.data&&s.historicalFundsPledged.loading===c.Loading&&!h.loading&&h.called){var e=h.data.historicalParachainFundsPledgeds;n({type:a.SetHistoricalSiblingFundsPledgedData,payload:e})}}),[h]),Object(i.useEffect)((function(){e&&t&&s.parachain.loading!==c.Loading&&n({type:a.LoadLatestSiblingFundsPledgedData})}),[e,t]),Object(i.useEffect)((function(){s.parachain.loading===c.Loading&&O()}),[s.parachain.loading]),Object(i.useEffect)((function(){if(!x.loading&&x.called&&x.data){var e=function(){var e;return null===(e=x.data.parachainByUniqueInput)||void 0===e?void 0:e.fundsPledged}();n({type:a.SetLatestSiblingFundsPledgedData,payload:{fundsPledged:e}})}}),[x])},rt=Object(A.a)((function(){ot(),ct(),it(),st(),lt()})),dt=Object(y.a)(rt,2),ut=dt[0];dt[1];var bt=function(){return Object(m.jsx)(P,{children:Object(m.jsx)(L,{children:Object(m.jsx)(ie,{children:Object(m.jsx)(ut,{children:Object(m.jsx)(Me,{})})})})})},jt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,480)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))},ht=function(){var e=new URL(document.location).searchParams;return console.log("loglevel",e.get("loglevel")),e.get("loglevel")}()||"info";Y.a.setLevel(ht),l.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(bt,{})}),document.getElementById("root")),jt()}},[[437,1,2]]]);
//# sourceMappingURL=main.f03ea708.chunk.js.map