(this["webpackJsonpBasilisk-crowdloan-ui"]=this["webpackJsonpBasilisk-crowdloan-ui"]||[]).push([[0],{282:function(e,t,n){},283:function(e,t,n){},294:function(e,t){},298:function(e,t){},299:function(e,t){},323:function(e,t,n){},324:function(e,t,n){},325:function(e,t,n){},437:function(e,t,n){"use strict";n.r(t);var a,c,i=n(15),s=n.n(i),o=n(241),r=n.n(o),l=(n(282),n(283),n(472)),d=n(474),u=n(462),b=n(26),j=n.n(b),h=function(e){return new j.a(e).multipliedBy(new j.a(10).exponentiatedBy(12)).toFixed(12)},v=function(e){return new j.a(e).dividedBy(new j.a(10).exponentiatedBy(12)).toFixed(12)},x=function(e){return new j.a(e).multipliedBy(f.ksmToUsd).toFixed(12)},O=function(e){return new j.a(e).dividedBy(f.hdxToUsd).toFixed(12)},g=new j.a("10").pow("6"),m=new j.a("10").pow("12"),f={processorUrl:"https://api-crowdloan-basilisk.hydradx.io/graphql",nodeUrl:"wss://ksm-arch-01.hydration.cloud",ownParachainId:"2090",ownCrowdloanBlockHeight:"9023093",dappName:"Basilisk Crowdloan",chronicleRefetchTimeout:6e3,auctionEndingPeriodLength:72e3,crowdloanCap:new j.a(h(new j.a("222222"))),opportunityCost:new j.a("0.1375"),ksmToUsd:"400",hdxToUsd:"0.08059",ksmPrecision:12,displayPrecision:6,chart:{historicalDataSpan:600,blocksPerDay:14400,auctionClosingStart:9035066},incentives:{hdx:{leadPercentageRateCliffRange:[new j.a("15").multipliedBy(g).toNumber(),new j.a("20").multipliedBy(g).toNumber()],scale:{max:30,min:5}},bsx:{allocated:new j.a(h(new j.a("15000000000"))),scale:{max:1,min:0}}}},p=n(9),w=new l.a({uri:f.processorUrl,cache:new d.a,defaultOptions:{watchQuery:{fetchPolicy:"network-only"},query:{fetchPolicy:"network-only"}}}),P=function(e){var t=e.children;return Object(p.jsx)(u.a,{client:w,children:t})},A=n(1),N=n(25),S=n(111);!function(e){e.LoadInitialData="LOAD_INITIAL_DATA",e.SetInitialData="SET_INITIAL_DATA_SUCCESS",e.LoadChronicleData="LOAD_CHRONICLE_DATA",e.SetChronicleData="SET_CHRONICLE_DATA",e.LoadAccountData="LOAD_ACCOUNT_DATA",e.SetAccountData="SET_ACCOUNT_DATA",e.LoadIncentiveData="LOAD_INCENTIVE_DATA",e.SetIncentiveData="SET_INCENTIVE_DATA",e.LoadHistoricalSiblingFundsPledgedData="LOAD_HISTORICAL_SIBLING_FUNDS_PLEDGED_DATA",e.SetHistoricalSiblingFundsPledgedData="SET_HISTORICAL_SIBLING_FUNDS_PLEDGED_DATA",e.LoadLatestOwnFundsPledgedData="LOAD_LATEST_OWN_FUNDS_PLEDGED_DATA",e.SetLatestOwnFundsPledgedData="SET_LATEST_OWN_FUNDS_PLEDGED_DATA",e.LoadLatestSiblingFundsPledgedData="LOAD_LATEST_SIBLING_FUNDS_PLEDGED_DATA",e.SetLatestSiblingFundsPledgedData="SET_LATEST_SIBLING_FUNDS_PLEDGED_DATA"}(a||(a={})),function(e){e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded"}(c||(c={}));var y=function(e){return{loading:c.Initial,data:e}},C=function(e){return{loading:c.Loading,data:e}},B=function(e){return{loading:c.Loaded,data:e}},I={initial:y({initializedAtBlockHeight:void 0}),chronicle:y({lastProcessedBlock:"0",mostRecentAuctionStart:void 0,mostRecentAuctionClosingStart:void 0}),incentives:y({leadPercentageRate:"0",totalContributionWeight:"0",siblingParachain:{id:void 0}}),account:y({totalContributed:"0",contributions:[],historicalIncentives:[]}),own:{historicalFundsPledged:y([]),parachain:y({fundsPledged:"0"})},sibling:{historicalFundsPledged:y([]),parachain:y({fundsPledged:"0"})}},k=function(e,t){switch(t.type){case a.LoadInitialData:return Object(N.a)(Object(N.a)({},e),{},{initial:C(e.initial.data)});case a.SetInitialData:return Object(N.a)(Object(N.a)({},e),{},{initial:B({initializedAtBlockHeight:t.payload.chronicle.lastProcessedBlock}),chronicle:B(t.payload.chronicle),incentives:B(t.payload.incentives),own:{historicalFundsPledged:B(t.payload.ownHistoricalFundsPledged),parachain:B(t.payload.ownParachainFundsPledged)}});case a.LoadAccountData:return Object(N.a)(Object(N.a)({},e),{},{account:C(e.account.data)});case a.SetAccountData:return Object(N.a)(Object(N.a)({},e),{},{account:B(t.payload)});case a.LoadChronicleData:return Object(N.a)(Object(N.a)({},e),{},{chronicle:C(e.chronicle.data)});case a.SetChronicleData:return Object(N.a)(Object(N.a)({},e),{},{chronicle:B(t.payload)});case a.LoadIncentiveData:return Object(N.a)(Object(N.a)({},e),{},{incentives:C(e.incentives.data)});case a.SetIncentiveData:return Object(N.a)(Object(N.a)({},e),{},{incentives:B(t.payload)});case a.LoadHistoricalSiblingFundsPledgedData:return Object(N.a)(Object(N.a)({},e),{},{sibling:Object(N.a)(Object(N.a)({},e.sibling),{},{historicalFundsPledged:C(e.sibling.historicalFundsPledged.data)})});case a.SetHistoricalSiblingFundsPledgedData:return Object(N.a)(Object(N.a)({},e),{},{sibling:Object(N.a)(Object(N.a)({},e.sibling),{},{historicalFundsPledged:B(t.payload)})});case a.LoadLatestSiblingFundsPledgedData:return Object(N.a)(Object(N.a)({},e),{},{sibling:Object(N.a)(Object(N.a)({},e.sibling),{},{parachain:C(e.sibling.parachain.data)})});case a.SetLatestSiblingFundsPledgedData:return Object(N.a)(Object(N.a)({},e),{},{sibling:Object(N.a)(Object(N.a)({},e.sibling),{},{parachain:B(t.payload)})});case a.LoadLatestOwnFundsPledgedData:return Object(N.a)(Object(N.a)({},e),{},{own:Object(N.a)(Object(N.a)({},e.own),{},{parachain:C(e.own.parachain.data)})});case a.SetLatestOwnFundsPledgedData:return Object(N.a)(Object(N.a)({},e),{},{own:Object(N.a)(Object(N.a)({},e.own),{},{parachain:B(t.payload)})});default:return e}},D=Object(S.a)((function(){var e=Object(i.useReducer)(k,I),t=Object(A.a)(e,2);return{state:t[0],dispatch:t[1]}})),L=Object(A.a)(D,2),F=L[0],R=L[1],_=function(){return R().dispatch},E=function(){return R().state},T=function(){return E().initial.loading===c.Loaded},H=function(){return E().chronicle},U=function(){return H().data.lastProcessedBlock},q=function(){return E().incentives},W=function(){return E().account},G=n(22),$=n.n(G),M=n(28),V=n(475),z=n(471),J=n(182),Z=n(463),K=n(48),Q=n.n(K),X=n(477),Y=n(262),ee={address:function(){var e=new URL(document.location).searchParams;return Q.a.debug("account",e.get("account")),e.get("account")}()||""},te=Object(S.a)((function(){var e=Object(i.useState)([]),t=Object(A.a)(e,2),n=t[0],a=t[1],c=Object(Z.a)("bsx-crowdloan-account",ee.address),s=Object(A.a)(c,2),o=s[0],r=s[1];o=o?Object(X.a)(Object(Y.a)(o),2):"";var l=Object(i.useState)("0"),d=Object(A.a)(l,2),u=d[0],b=d[1],h=Object(i.useState)(!1),v=Object(A.a)(h,2),x=v[0],O=v[1],g=Object(i.useState)(!1),m=Object(A.a)(g,2),p=(m[0],m[1]),w=Object(i.useState)(void 0),P=Object(A.a)(w,2),S=P[0],y=P[1],C=Object(i.useState)(void 0),B=Object(A.a)(C,2),I=B[0],k=B[1],D=H();Object(i.useEffect)((function(){setTimeout(Object(M.a)($.a.mark((function e(){var t,n,c,i;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q.a.debug("usePolkadot","loading initial"),p(!0),e.next=4,Object(J.b)(f.dappName);case 4:return t=e.sent,e.next=7,Object(J.a)();case 7:return n=e.sent.map((function(e){return Object(N.a)(Object(N.a)({},e),{},{address:Object(X.a)(Object(Y.a)(e.address),2)})})),c=new V.a(f.nodeUrl),e.next=11,z.a.create({provider:c});case 11:i=e.sent,Q.a.debug("usePolkadot","loaded",t,i,n),a(n),y(i),p(!1);case 16:case"end":return e.stop()}}),e)}))),300)}),[]);var L=function(){var e=Object(M.a)($.a.mark((function e(){var t,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S&&o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,S.query.system.account(o);case 4:t=e.sent,n=t.data,Q.a.debug("usePolkadot","balance",n.free.toString()),b(n.free.toString());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&S&&L()}),[o,S,D.data.lastProcessedBlock]),{accounts:n,setActiveAccount:r,activeAccount:o,activeAccountBalance:u,lastContributionStatus:I,showAccountSelector:x,setShowAccountSelector:O,contribute:function(){var e=Object(M.a)($.a.mark((function e(t){var n,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S){e.next=2;break}return e.abrupt("return");case 2:if(o){e.next=4;break}return e.abrupt("return");case 4:return p(!0),e.next=7,Object(J.c)(o);case 7:n=e.sent,a=n.signer,Object(M.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("amount",new j.a(t).toFixed(0));try{S.tx.crowdloan.contribute(f.ownParachainId,new j.a(t).toFixed(0),null).signAndSend(o,{signer:a},(function(e){var t=e.status,n=e.events;console.log("status",t,t.toHuman()),(t.isInBlock||t.isFinalized)&&(n.filter((function(e){var t=e.event;return S.events.system.ExtrinsicFailed.is(t)})).length?k(!1):k(!0))})),L()}catch(n){console.error(n),k(!1)}p(!1);case 3:case"end":return e.stop()}}),e)})))();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})),ne=Object(A.a)(te,2),ae=ne[0],ce=ne[1],ie=(n(323),n.p+"static/media/Logo-dark-2-clean.cbd38319.png"),se=n.p+"static/media/basilisk-wallpaper-2.cc01249c.png",oe=n(136),re=n.n(oe),le=(n(324),n(206)),de=n.n(le),ue=n(259),be=function(e){var t=new j.a(e),n=f.incentives.hdx.leadPercentageRateCliffRange[0],a=f.incentives.hdx.leadPercentageRateCliffRange[1];return t.lt(n)?f.incentives.hdx.scale.max:t.gt(a)?f.incentives.hdx.scale.min:de()([n,a],[f.incentives.hdx.scale.max,f.incentives.hdx.scale.min])(e)},je=function(e,t){if(!t)return f.incentives.bsx.scale.max;var n=new j.a(t).plus(f.auctionEndingPeriodLength).toNumber(),a=new j.a(e);return a.lt(t)?f.incentives.bsx.scale.max:a.gt(n)?f.incentives.bsx.scale.min:de()([parseInt(t),n],[f.incentives.bsx.scale.max,f.incentives.bsx.scale.min])(e)},he=function(e,t){return e.reduce((function(e,n){var a=je(n.blockHeight,t);return e=e.plus(new j.a(n.balance).multipliedBy(a))}),new j.a(0))},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=he(e,t),a=f.incentives.bsx.allocated.dividedBy(f.crowdloanCap.multipliedBy(f.incentives.bsx.scale.max)).multipliedBy(n);return a},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=he(e,t),c=new j.a(n).dividedBy(g);if(c.isZero())return new j.a(0);var i=f.incentives.bsx.allocated.dividedBy(c).multipliedBy(a);return i},Oe=function(e,t){return e.reduce((function(e,n){var a=Object(ue.find)(t,{blockHeight:"".concat(n.blockHeight)}),c=(null===a||void 0===a?void 0:a.leadPercentageRate)||"0",i=be(c),s=new j.a(n.balance).multipliedBy(new j.a(f.opportunityCost)).multipliedBy(new j.a(i)).dividedBy(new j.a(100));return e=e.plus(s)}),new j.a("0"))},ge=function(e){var t=e.connectAccount,n=ce(),a=n.activeAccountBalance,c=n.lastContributionStatus,s=n.contribute,o=n.activeAccount,r=Object(i.useState)(void 0),l=Object(A.a)(r,2),d=l[0],u=l[1],b={minimalBsxReceived:"0",currentBsxReceived:"0",currentHdxReceived:"0"},w=Object(i.useState)(b),P=Object(A.a)(w,2),N=P[0],S=P[1],y=H().data,C=y.lastProcessedBlock,B=y.mostRecentAuctionClosingStart,I=q().data,k=I.totalContributionWeight,D=I.leadPercentageRate,L=function(){var e;return(null===(e=E().own.parachain.data)||void 0===e?void 0:e.fundsPledged)||"222000000000000"}();Object(i.useEffect)((function(){var e=[{blockHeight:C,balance:new j.a(d||0).multipliedBy(m).toFixed(0),crowdloan:{id:f.ownParachainId}}];if(!d)return S(b);var t=ve(e,B),n=new j.a(e[0].balance).multipliedBy(je(C,B)).multipliedBy(g),a=new j.a(k).plus(n).toFixed(0),c=xe(e,B,a),i=O(x(Oe(e,[{blockHeight:C,leadPercentageRate:D}])));S({minimalBsxReceived:new j.a(v(t)).toFixed(f.displayPrecision),currentBsxReceived:new j.a(v(c)).toFixed(f.displayPrecision),currentHdxReceived:new j.a(v(i)).toFixed(f.displayPrecision)})}),[C,D,B,k,d]);Object(i.useEffect)((function(){c&&u(0)}),[c]);var F=function(){};return Object(p.jsxs)("div",{className:"bsx-contribute-form",children:[Object(p.jsxs)("div",{className:"bsx-form-wrapper",children:[Object(p.jsx)("label",{children:"ksm contribution"}),Object(p.jsx)(re.a,{name:"amount",decimalsLimit:12,value:d,disabled:!1,allowNegativeValue:!1,placeholder:"Sacrifice goes here",onValueChange:function(e){if(Q.a.debug("CrowdloanContributeForm","handleContributeChange",e,a),void 0==e)return u(void 0);f.crowdloanCap.minus(L).lt(h(e))||u(e)}}),Object(p.jsx)("label",{children:"minimal bsx received"}),Object(p.jsx)(re.a,{name:"minimal bsx received",disabled:!0,value:N.minimalBsxReceived,onValueChange:F}),Object(p.jsx)("label",{children:"current bsx received"}),Object(p.jsx)(re.a,{name:"current bsx received",disabled:!0,value:N.currentBsxReceived,onValueChange:F}),Object(p.jsx)("label",{children:"current hdx received"}),Object(p.jsx)(re.a,{name:"current hdx received",disabled:!0,value:N.currentHdxReceived,onValueChange:F}),o?Object(p.jsx)("button",{disabled:!d||0==d,onClick:function(){Q.a.debug("CrowdloanContributeForm","handleContributeClick",d),s(h(d))},children:"Contribute"}):Object(p.jsx)("button",{onClick:t,children:"Connect Account"})]}),Object(p.jsx)("div",{className:"contribution-status",children:c?"Thanksss for your sacrifice":0==c?"There was a problem with your contribution, please try again.":""})]})},me=n(41),fe=n(177),pe=n(470),we=(n(325),function(e){var t=e.onAccountSelect,n=ce(),a=n.accounts,c=n.setActiveAccount,s=Object(i.useRef)(null);Object(pe.a)(s,(function(){t()}));return Object(p.jsx)("div",{className:"bsx-account-selector",children:Object(p.jsx)("div",{className:"bsx-account-selector-backdrop",children:Object(p.jsxs)("div",{className:"bsx-account-selector-modal",ref:s,children:[Object(p.jsx)("div",{className:"title",children:"Select an account"}),a&&a.length?a.map((function(e){return Object(p.jsxs)("div",{className:"account",onClick:function(n){return a=e.address,c(a),void t();var a},children:[Object(p.jsx)("p",{className:"name",children:e.meta.name}),Object(p.jsx)("p",{className:"address",children:e.address})]},e.address)})):Object(p.jsx)("div",{className:"bsx-loading-accounts",children:"Loading accounts"}),Object(p.jsx)("div",{})]})})})}),Pe=n(122),Ae=n.n(Pe),Ne=n(263);me.b.register(fe.a);Ne.a.animation=!1;var Se=function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"col-9 bsx-graph",children:[Object(p.jsxs)("div",{className:"bsx-graph-wrapper",children:[Object(p.jsx)("div",{className:"bsx-annotation-container"}),Object(p.jsxs)("div",{className:"bsx-graph-loader",children:["Graph will become available ",Object(p.jsx)("br",{})," in the next few hours"]})]}),Object(p.jsxs)("div",{className:"bsx-graph-timeline",children:[Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-3",children:"29.8"}),Object(p.jsxs)("div",{className:"col-6 bsx-legend",children:[Object(p.jsx)("span",{className:"basilisk",children:"Basilisk"})," / ",Object(p.jsx)("span",{className:"sibling",children:"Target"})," KSM raised"]}),Object(p.jsx)("div",{className:"col-3",children:"5.9"})]}),Object(p.jsx)("div",{className:"bsx-progress-bar-container",children:Object(p.jsx)("div",{className:"bsx-progress-bar",style:{width:"0%"}})})]})]})})};me.b.register(fe.a);var ye,Ce,Be,Ie,ke,De,Le,Fe,Re,_e={precision:6,decimalSeparator:","},Ee=function(){var e=U(),t=function(){var e=q(),t=U(),n=H().data.mostRecentAuctionClosingStart;if(e.loading!==c.Loaded)return{bsxMultiplier:void 0,hdxBonus:void 0};var a=new j.a(be(e.data.leadPercentageRate));return{bsxMultiplier:new j.a(je(t,n)),hdxBonus:a}}(),n=t.bsxMultiplier,a=t.hdxBonus,i=function(){var e=W().data.contributions,t=H().data.mostRecentAuctionClosingStart;return ve(e,t)}(),s=function(){var e=W().data.contributions,t=H().data.mostRecentAuctionClosingStart,n=q().data.totalContributionWeight;return xe(e,t,n)}(),o=function(){var e=W().data,t=e.contributions,n=e.historicalIncentives;return Oe(t,n)}(),r=ce();return{lastProcessedBlock:e,showAccountSelector:r.showAccountSelector,setShowAccountSelector:r.setShowAccountSelector,activeAccount:r.activeAccount,activeAccountBalance:r.activeAccountBalance,totalContributed:W().data.totalContributed,bsxMultiplier:n,hdxBonus:a,currentAccountMinimumBsxReceived:i,currentAccountCurrentBsxReceived:s,currentAccountCurrentHdxReceived:o}},Te=function(){var e=Ee(),t=e.lastProcessedBlock,n=e.showAccountSelector,a=e.setShowAccountSelector,c=e.activeAccount,i=e.activeAccountBalance,s=e.totalContributed,o=e.bsxMultiplier,r=e.hdxBonus,l=e.currentAccountMinimumBsxReceived,d=e.currentAccountCurrentBsxReceived,u=e.currentAccountCurrentHdxReceived;return Object(p.jsxs)("div",{className:"bsx-dashboard",children:[Object(p.jsx)("div",{className:"bsx-navbar",children:Object(p.jsx)("div",{className:"container-xl",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-3",children:Object(p.jsx)("div",{className:"bsx-logo",children:"basilisk"})}),Object(p.jsx)("div",{className:"col-9 bsx-menu-col",children:Object(p.jsxs)("div",{className:"bsx-menu",children:[Object(p.jsx)("div",{className:"bsx-menu-item",children:Object(p.jsx)("a",{href:"https://bsx.fi/",target:"_blank",children:"home"})}),Object(p.jsx)("div",{className:"bsx-menu-item",children:Object(p.jsx)("a",{href:"https://discord.gg/S8YZj5aXR6",target:"_blank",children:"discord"})}),Object(p.jsx)("div",{className:"bsx-eye",children:Object(p.jsx)("img",{src:ie})}),Object(p.jsx)("div",{className:"bsx-menu-item",children:Object(p.jsx)("a",{href:"https://github.com/galacticcouncil/Basilisk-node",target:"_blank",children:"github"})}),Object(p.jsx)("div",{className:"bsx-menu-item",children:Object(p.jsx)("a",{href:"https://docs.bsx.fi/",target:"_blank",children:"docs"})}),Object(p.jsx)("div",{className:"bsx-menu-item",children:Object(p.jsx)("a",{href:"https://basiliskfi.substack.com/",target:"_blank",children:"blog"})})]})})]})})}),Object(p.jsx)("div",{className:"bsx-account",children:Object(p.jsxs)("div",{className:"container-xl",children:[Object(p.jsxs)("div",{className:"row bsx-account-selector-display",children:[Object(p.jsx)("div",{className:"col-9 bsx-address",children:Object(p.jsxs)("div",{children:[Object(p.jsxs)("span",{className:"bsx-chronicle",children:["#".concat(t),c?" / ":" / No account connected"]}),c]})}),Object(p.jsx)("div",{className:"col-3 bsx-select-account",onClick:function(e){return a(!0)},children:c?"change your account":"connect account"})]}),Object(p.jsxs)("div",{className:"row bsx-stats",children:[Object(p.jsx)("div",{className:"col-9",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"col-3 bsx-stat",children:[Object(p.jsx)("span",{className:"bsx-stat-title",children:"total ksm contributed"}),Object(p.jsxs)("span",{className:"bsx-stat-value",children:["~",Ae()(parseFloat(v(s)),_e)]})]}),Object(p.jsxs)("div",{className:"col-3 bsx-stat",children:[Object(p.jsx)("span",{className:"bsx-stat-title",children:"minimal bsx received"}),Object(p.jsxs)("span",{className:"bsx-stat-value",children:["~",Ae()(parseFloat(v(l)),_e)]})]}),Object(p.jsxs)("div",{className:"col-3 bsx-stat",children:[Object(p.jsx)("span",{className:"bsx-stat-title",children:"current bsx received"}),Object(p.jsx)("span",{className:"bsx-stat-value",children:d?"~".concat(Ae()(parseFloat(v(d)),_e)):"-"})]}),Object(p.jsxs)("div",{className:"col-3 bsx-stat",children:[Object(p.jsx)("span",{className:"bsx-stat-title",children:"current hdx reward"}),Object(p.jsxs)("span",{className:"bsx-stat-value",children:["~",Ae()(parseFloat(O(x(v(u)))),_e)]})]})]})}),Object(p.jsxs)("div",{className:"col-3 bsx-stat bsx-stat-balance",children:[Object(p.jsx)("span",{className:"bsx-stat-title",children:"balance"}),Object(p.jsxs)("span",{className:"bsx-stat-value",children:["~",Ae()(parseFloat(v(i)),_e)]})]})]})]})}),Object(p.jsx)("div",{className:"container-xl",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)(Se,{}),Object(p.jsxs)("div",{className:"col-3 bsx-contribute",children:[Object(p.jsx)("div",{className:"bsx-incentives",children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"bsx-incentive",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-6 name",children:Object(p.jsx)("span",{children:"hdx bonus"})}),Object(p.jsx)("div",{className:"col-6 value",children:Object(p.jsx)("span",{children:r?"~".concat(r.toFixed(2)):"-"})})]})}),Object(p.jsx)("div",{className:"bsx-incentive",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-8 name",children:Object(p.jsx)("span",{children:"bsx multiplier"})}),Object(p.jsx)("div",{className:"col-4 value",children:Object(p.jsx)("span",{children:o?"~".concat(o.toFixed(2)):"-"})})]})})]})}),Object(p.jsx)("div",{children:Object(p.jsx)(ge,{connectAccount:function(){return a(!0)},totalContributionWeight:"0"})})]})]})}),Object(p.jsx)("div",{className:"bsx-wallpaper",children:Object(p.jsx)("img",{src:se})}),n?Object(p.jsx)(we,{onAccountSelect:function(){return a(!1)}}):Object(p.jsx)(p.Fragment,{})]})},He=n(90),Ue=n(473),qe=n(476),We='\n    chronicleByUniqueInput(where: {id: "'.concat("chronicle",'"}) {\n        lastProcessedBlock\n        mostRecentAuctionClosingStart\n        mostRecentAuctionStart\n    }\n'),Ge=(Object(Ue.a)(ye||(ye=Object(He.a)(["\n    query HistoricalFundsPledged($parachainId: ID!, $blockHeight: BigInt!) {\n        ","\n    }\n"])),"\n    historicalParachainFundsPledgeds(where: {parachain: {id_eq: $parachainId}, blockHeight_gte: $blockHeight}) {\n        fundsPledged\n        blockHeight\n    }\n"),Object(Ue.a)(Ce||(Ce=Object(He.a)(["\n    query FundsPledged($parachainId: ID!) {\n        ","\n    }\n"])),"\n    parachainByUniqueInput(where: {id: $parachainId}) {\n        fundsPledged\n    }\n"),'\n    incentiveByUniqueInput(where: {id: "'.concat("incentive",'"}) {\n        totalContributionWeight\n        leadPercentageRate,\n        siblingParachain {\n            id\n        }\n    }\n')),$e=Object(Ue.a)(Be||(Be=Object(He.a)(["\n    query InitialData {\n        ","\n        ","\n        ","\n        ","\n    }\n"])),We,(Fe=f.ownParachainId,Re=f.ownCrowdloanBlockHeight,'\n    historicalParachainFundsPledgeds(where: {parachain: {id_eq: "'.concat(Fe,'"}, blockHeight_gte: "').concat(Re,'"}) {\n        fundsPledged\n        blockHeight\n    }\n')),function(e){return'\n    parachainByUniqueInput(where: {id: "'.concat(e,'"}) {\n        fundsPledged\n    }\n')}(f.ownParachainId),Ge),Me=Object(Ue.a)(Ie||(Ie=Object(He.a)(["\n    query HistoricalIncentives($blockHeights: [BigInt!]) {\n        ","\n    }\n"])),"\n    historicalIncentives(where: {blockHeight_in: $blockHeights}) {\n        blockHeight\n        leadPercentageRate\n    }\n"),Ve=Object(Ue.a)(ke||(ke=Object(He.a)(["\n    query ContributionsByAccountId($accountId: ID!) {\n        ","\n    }\n"])),"\n    accountByUniqueInput(where: {id: $accountId}) {\n        totalContributed\n        contributions {\n            crowdloan {\n                id\n            }\n            blockHeight\n            balance\n        }\n    }\n"),ze=Object(Ue.a)(De||(De=Object(He.a)(["\n    query Chronicle {\n        ","\n    }\n"])),We),Je=Object(Ue.a)(Le||(Le=Object(He.a)(["\n    query Incentives {\n        ","\n    }\n"])),Ge),Ze=function(e){var t,n;return(null===(t=e.data)||void 0===t||null===(n=t.accountByUniqueInput)||void 0===n?void 0:n.contributions.filter((function(e){return e.crowdloan.id===f.ownParachainId})).map((function(e){return{balance:e.balance,blockHeight:e.blockHeight,crowdloan:e.crowdloan}})))||[]},Ke=function(){var e,t,n=_(),s=W(),o=ce(),r=o.activeAccount,l=o.activeAccountBalance,d=(e=r,Object(qe.a)(Ve,{variables:{accountId:e}})),u=Object(A.a)(d,2),b=u[0],j=u[1],h=(t=j?Ze(j).map((function(e){return e.blockHeight})):[],Object(qe.a)(Me,{variables:{blockHeights:t}})),v=Object(A.a)(h,2),x=v[0],O=v[1],g=U();Object(i.useEffect)((function(){s.loading!==c.Loading&&n({type:a.LoadAccountData})}),[r,l,g]),Object(i.useEffect)((function(){s.loading==c.Loading&&b()}),[s.loading]),Object(i.useEffect)((function(){j.data&&x()}),[j.data,j.loading]),Object(i.useEffect)((function(){if(!j.loading&&j.called){var e=function(){var e,t;return(null===(e=j.data)||void 0===e||null===(t=e.accountByUniqueInput)||void 0===t?void 0:t.totalContributed)||"0"}(),t=Ze(j),c=function(){var e;return(null===(e=O.data)||void 0===e?void 0:e.historicalIncentives)||[]}();n({type:a.SetAccountData,payload:{totalContributed:e,contributions:t,historicalIncentives:c}})}}),[j,O])},Qe=function(){var e=_(),t=H(),n=Object(qe.a)(ze),s=Object(A.a)(n,2),o=s[0],r=s[1];Object(i.useEffect)((function(){var t=setInterval((function(){Q.a.debug("useChronicleData","fetching chronicle"),e({type:a.LoadChronicleData})}),f.chronicleRefetchTimeout);return function(){return clearInterval(t)}}),[]),Object(i.useEffect)((function(){t.loading==c.Loading&&o()}),[t.loading]),Object(i.useEffect)((function(){if(!r.loading&&r.called){var t=function(){var e,t,n;return{lastProcessedBlock:(null===(e=r.data)||void 0===e?void 0:e.chronicleByUniqueInput.lastProcessedBlock)||"0",mostRecentAuctionStart:null===(t=r.data)||void 0===t?void 0:t.chronicleByUniqueInput.mostRecentAuctionStart,mostRecentAuctionClosingStart:null===(n=r.data)||void 0===n?void 0:n.chronicleByUniqueInput.mostRecentAuctionClosingStart}}();e({type:a.SetChronicleData,payload:t})}}),[r])},Xe=function(){var e=U(),t=T(),n=E().initial.data.initializedAtBlockHeight,s=_(),o=q(),r=Object(qe.a)(Je),l=Object(A.a)(r,2),d=l[0],u=l[1];Object(i.useEffect)((function(){t&&e&&e!==n&&s({type:a.LoadIncentiveData})}),[t,e,n]),Object(i.useEffect)((function(){o.loading===c.Loading&&d()}),[o.loading]),Object(i.useEffect)((function(){if(!u.loading&&u.called&&u.data){var e=function(){var e,t=(null===(e=u.data)||void 0===e?void 0:e.incentiveByUniqueInput)||{leadPercentageRate:"0",totalContributionWeight:"0"},n=t.leadPercentageRate,a=t.totalContributionWeight,c=t.siblingParachain;return{leadPercentageRate:n,totalContributionWeight:a,siblingParachain:{id:null===c||void 0===c?void 0:c.id}}}();s({type:a.SetIncentiveData,payload:e})}}),[u])},Ye=function(){var e=_(),t=E().initial.loading===c.Loading,n=T(),s=Object(qe.a)($e),o=Object(A.a)(s,2),r=o[0],l=o[1];Object(i.useEffect)((function(){Q.a.debug("useInitialData","loading"),e({type:a.LoadInitialData})}),[]),Object(i.useEffect)((function(){t&&!n&&r()}),[t]),Object(i.useEffect)((function(){if(!l.loading&&l.called&&l.data&&t){var n=function(){var e,t=(null===(e=l.data)||void 0===e?void 0:e.chronicleByUniqueInput)||{lastProcessedBlock:"0"};return{lastProcessedBlock:t.lastProcessedBlock,mostRecentAuctionStart:t.mostRecentAuctionStart,mostRecentAuctionClosingStart:t.mostRecentAuctionClosingStart}}(),c=l.data.historicalParachainFundsPledgeds.map((function(e){return{fundsPledged:e.fundsPledged,blockHeight:e.blockHeight}})),i=l.data.parachainByUniqueInput,s=function(){var e,t=(null===(e=l.data)||void 0===e?void 0:e.incentiveByUniqueInput)||{leadPercentageRate:"0",totalContributionWeight:"0"},n=t.leadPercentageRate,a=t.totalContributionWeight,c=t.siblingParachain;return{leadPercentageRate:n,totalContributionWeight:a,siblingParachain:{id:null===c||void 0===c?void 0:c.id}}}();Q.a.debug("useInitialData","done loading",{chronicle:n,ownHistoricalFundsPledged:c,ownParachainFundsPledged:i,incentives:s}),e({type:a.SetInitialData,payload:{chronicle:n,ownHistoricalFundsPledged:c,ownParachainFundsPledged:i,incentives:s}})}}),[l.data,t])},et=Object(S.a)((function(){Ye(),Ke(),Qe(),Xe()})),tt=Object(A.a)(et,2),nt=tt[0];tt[1];var at=function(){return Object(p.jsx)(P,{children:Object(p.jsx)(F,{children:Object(p.jsx)(ae,{children:Object(p.jsx)(nt,{children:Object(p.jsx)(Te,{})})})})})},ct=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,480)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))},it=function(){var e=new URL(document.location).searchParams;return console.log("loglevel",e.get("loglevel")),e.get("loglevel")}()||"info";Q.a.setLevel(it),r.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(at,{})}),document.getElementById("root")),ct()}},[[437,1,2]]]);
//# sourceMappingURL=main.fe63efcb.chunk.js.map